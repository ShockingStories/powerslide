function getRangeValues(){return{carNumber:document.getElementById("carNumber").value,solarNumber:document.getElementById("solarNumber").value,homeNumber:document.getElementById("homeNumber").value,powerOffNumber:document.getElementById("powerOffNumber").value,windfarmNumber:document.getElementById("windfarmNumber").value,busNumber:document.getElementById("busNumber").value,bicycleNumber:document.getElementById("bicycleNumber").value}}function updateCars(e){document.getElementById("carNumber").value=e,document.getElementById("carRange").value=e;var t=shockingUpdate(getRangeValues());console.log("Data from shockingUpdate: ",t),updateGraph("gwh-chart",t.gen_production),updateGraph("co2-chart",{Geothermal:t.gen_emissions.Geothermal,Coal:t.gen_emissions.Coal,Gas:t.gen_emissions.Gas,Road:t.fleet_emissions.Road})}function preprocessData(e,t){var r=[1],n=0;for(var a in e)e.hasOwnProperty(a)&&(n+=e[a],r.push(e[a]));t>0&&r.push(t);for(var o=1;o<r.length;o++)r[o]=Math.round(r[o]/n*100);return r}function updateTotal(e,t){var r=0;for(var n in t)t.hasOwnProperty(n)&&(r+=t[n]);return r=Math.round(r),console.log("Updated total: ",r),document.getElementById(e).innerHTML=r,r}function updateGraph(e,t){var r=80,n=300;console.log("Data passed in: ",t);var a=e.split("-")[0]+"-total",o=updateTotal(a,t);totals[a]||(console.log("Element: ",a,document.getElementById(a).innerHTML),totals[a]=parseInt(document.getElementById(a).innerHTML,10),console.log("TOTALS: ",totals));for(var l=totals[a]-o,s=document.getElementById(e);s.firstChild;)s.removeChild(s.firstChild);var u=d3.select("#"+e).append("svg:svg").attr("class","chart").attr("width",r).attr("height",n).append("svg:g").attr("transform","translate(0,"+n+")");console.log("DELTA: ",l);for(var c=[preprocessData(t,l)],d=[],i=0;i<c[0].length-1;i++)d.push("rgb("+randomRGB()+","+randomRGB()+","+randomRGB()+")"),l>0&&(d[c[0].length-1]="rgb(255,255,255)");x=d3.scale.ordinal().rangeRoundBands([0,r]),y=d3.scale.linear().range([0,n]),z=d3.scale.ordinal().range(d);for(var g=[],i=1;i<c[0].length;i++)g.push("c"+i);var m=g.map(function(e,t){return c.map(function(e,r){return{x:r,y:e[t+1]}})}),p=d3.layout.stack()(m);x.domain(p[0].map(function(e){return e.x})),y.domain([0,d3.max(p[p.length-1],function(e){return e.y0+e.y})]);{var v=u.selectAll("g.valgroup").data(p).enter().append("svg:g").attr("class","valgroup").style("fill",function(e,t){return z(t)}).style("stroke",function(e,t){return d3.rgb(z(t)).darker()});v.selectAll("rect").data(function(e){return e}).enter().append("svg:rect").attr("x",function(e){return x(e.x)}).attr("y",function(e){return-y(e.y0)-y(e.y)}).attr("height",function(e){return y(e.y)}).attr("width",Math.min.apply(null,[x.rangeBand()-2,100]))}}function randomRGB(){return Math.floor(256*Math.random())}function columnGraph(e,t){for(var r=80,n=300,a=d3.select(e).append("svg:svg").attr("class","chart").attr("width",r).attr("height",n).append("svg:g").attr("transform","translate(0,300)"),o=[t],l=[],s=0;s<o[0].length-1;s++)l.push("rgb("+randomRGB()+","+randomRGB()+","+randomRGB()+")");x=d3.scale.ordinal().rangeRoundBands([0,r]),y=d3.scale.linear().range([0,n]),z=d3.scale.ordinal().range(l);var u=["c1","c2","c3","c4","c5"].map(function(e,t){return o.map(function(e,r){return{x:r,y:e[t+1]}})}),c=d3.layout.stack()(u);x.domain(c[0].map(function(e){return e.x})),y.domain([0,d3.max(c[c.length-1],function(e){return e.y0+e.y})]);{var d=a.selectAll("g.valgroup").data(c).enter().append("svg:g").attr("class","valgroup").style("fill",function(e,t){return z(t)}).style("stroke",function(e,t){return d3.rgb(z(t)).darker()});d.selectAll("rect").data(function(e){return e}).enter().append("svg:rect").attr("x",function(e){return x(e.x)}).attr("y",function(e){return-y(e.y0)-y(e.y)}).attr("height",function(e){return y(e.y)}).attr("width",Math.min.apply(null,[x.rangeBand()-2,100]))}}function shockingUpdate(e){console.log("shockingUpdate - Inputs: "+JSON.stringify(e));var t=getBaseline(),r=t.gen_production,n=t.gen_emissions,a=t.gen_cost,o={Road:12688},l=e.carNumber,s=l/100;o.Road=o.Road*(1-s),ev_power_reqts=2406.4*3341013*s,ev_power_reqts/=1e6;var u=0;for(var c in r)u+=r[c];var d=1+ev_power_reqts/u;console.log("total: "+u),console.log("increase from electric vehicles: "+d),console.log("ev_power_reqts "+ev_power_reqts);var i=(e.solarNumber,5260*e.solarNumber);i/=1e6,console.log("solar production: "+i);var g=i/u;d-=g;for(var c in n)n[c]=n[c]*d;for(var c in r)r[c]=r[c]*d;r.Solar=i;for(var c in n)n[c]=n[c]*d;for(var c in a)a[c]=a[c]*d;var m={gen_production:r,gen_emissions:n,gen_cost:a,fleet_emissions:o};return console.log("Result: "+JSON.stringify(m)),m}function getBaseline(){var e={Hydro:24095,Geothermal:6487,Wind:2187,Coal:1832,Gas:6626},t={Hydro:0,Geothermal:847.32,Wind:0,Coal:1222.2,Gas:3405.51},r={Hydro:53872180,Geothermal:59535e3,Wind:43484e3,Coal:34177200,Gas:161044192},n={gen_production:e,gen_emissions:t,gen_cost:r};return n}var totals={};document.addEventListener("DOMContentLoaded",function(e){updateCars(0),columnGraph("#cost-chart",[1,10,15,15,35,50]),columnGraph("#investment-chart",[1,5,10,15,45,50])});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNoYXJ0LmpzIiwiZW5naW5lLmpzIl0sIm5hbWVzIjpbImdldFJhbmdlVmFsdWVzIiwiY2FyTnVtYmVyIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInZhbHVlIiwic29sYXJOdW1iZXIiLCJob21lTnVtYmVyIiwicG93ZXJPZmZOdW1iZXIiLCJ3aW5kZmFybU51bWJlciIsImJ1c051bWJlciIsImJpY3ljbGVOdW1iZXIiLCJ1cGRhdGVDYXJzIiwiZGF0YSIsInNob2NraW5nVXBkYXRlIiwiY29uc29sZSIsImxvZyIsInVwZGF0ZUdyYXBoIiwiZ2VuX3Byb2R1Y3Rpb24iLCJHZW90aGVybWFsIiwiZ2VuX2VtaXNzaW9ucyIsIkNvYWwiLCJHYXMiLCJSb2FkIiwiZmxlZXRfZW1pc3Npb25zIiwicHJlcHJvY2Vzc0RhdGEiLCJkZWx0YSIsInZhbHVlcyIsInRvdGFsIiwiayIsImhhc093blByb3BlcnR5IiwicHVzaCIsImkiLCJsZW5ndGgiLCJNYXRoIiwicm91bmQiLCJ1cGRhdGVUb3RhbCIsInRvdGFsSWQiLCJpbm5lckhUTUwiLCJiaW5kVG8iLCJ3IiwiaCIsInNwbGl0IiwibmV3VG90YWwiLCJ0b3RhbHMiLCJwYXJzZUludCIsImVsZW1lbnQiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJzdmciLCJkMyIsInNlbGVjdCIsImFwcGVuZCIsImF0dHIiLCJtYXRyaXgiLCJjb2xvcnMiLCJyYW5kb21SR0IiLCJ4Iiwic2NhbGUiLCJvcmRpbmFsIiwicmFuZ2VSb3VuZEJhbmRzIiwieSIsImxpbmVhciIsInJhbmdlIiwieiIsImEiLCJyZW1hcHBlZCIsIm1hcCIsImRhdCIsImQiLCJpaSIsInN0YWNrZWQiLCJsYXlvdXQiLCJzdGFjayIsImRvbWFpbiIsIm1heCIsInkwIiwidmFsZ3JvdXAiLCJzZWxlY3RBbGwiLCJlbnRlciIsInN0eWxlIiwicmdiIiwiZGFya2VyIiwibWluIiwiYXBwbHkiLCJyYW5nZUJhbmQiLCJmbG9vciIsInJhbmRvbSIsImNvbHVtbkdyYXBoIiwiaW5wdXRzIiwiSlNPTiIsInN0cmluZ2lmeSIsImJhc2VsaW5lIiwiZ2V0QmFzZWxpbmUiLCJnZW5fY29zdCIsImVsZWN0cmljX3BjdCIsImV2X3Bvd2VyX3JlcXRzIiwidG90YWxfZ2VuIiwia2V5IiwiaW5jcmVhc2VfaW5fcG93ZXJfcmVxdHMiLCJzb2xhcl9wcm9kdWN0aW9uIiwiZGVjcmVhc2VfZHVlX3RvX3NvbGFyIiwicmVzdWx0IiwiSHlkcm8iLCJXaW5kIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50Il0sIm1hcHBpbmdzIjoiQUFhQSxRQUFBQSxrQkFDQSxPQUNBQyxVQUFBQyxTQUFBQyxlQUFBLGFBQUFDLE1BQ0FDLFlBQUFILFNBQUFDLGVBQUEsZUFBQUMsTUFDQUUsV0FBQUosU0FBQUMsZUFBQSxjQUFBQyxNQUNBRyxlQUFBTCxTQUFBQyxlQUFBLGtCQUFBQyxNQUNBSSxlQUFBTixTQUFBQyxlQUFBLGtCQUFBQyxNQUNBSyxVQUFBUCxTQUFBQyxlQUFBLGFBQUFDLE1BQ0FNLGNBQUFSLFNBQUFDLGVBQUEsaUJBQUFDLE9BSUEsUUFBQU8sWUFBQVAsR0FDQUYsU0FBQUMsZUFBQSxhQUFBQyxNQUFBQSxFQUNBRixTQUFBQyxlQUFBLFlBQUFDLE1BQUFBLENBRUEsSUFBQVEsR0FBQUMsZUFBQWIsaUJBRUFjLFNBQUFDLElBQUEsNkJBQUFILEdBQ0FJLFlBQUEsWUFBQUosRUFBQUssZ0JBQ0FELFlBQUEsYUFDQUUsV0FBQU4sRUFBQU8sY0FBQSxXQUNBQyxLQUFBUixFQUFBTyxjQUFBLEtBQ0FFLElBQUFULEVBQUFPLGNBQUEsSUFDQUcsS0FBQVYsRUFBQVcsZ0JBQUEsT0NyQ0EsUUFBQUMsZ0JBQUFaLEVBQUFhLEdBRUEsR0FBQUMsSUFBQSxHQUNBQyxFQUFBLENBQ0EsS0FBQSxHQUFBQyxLQUFBaEIsR0FDQUEsRUFBQWlCLGVBQUFELEtBQ0FELEdBQUFmLEVBQUFnQixHQUNBRixFQUFBSSxLQUFBbEIsRUFBQWdCLElBS0FILEdBQUEsR0FDQUMs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V0FBQSxHQUNBNEUsWUFBQSxlQUNBLEVBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxLQUVBQSxZQUFBLHFCQUNBLEVBQUEsRUFBQSxHQUFBLEdBQUEsR0FBQSIsImZpbGUiOiJqcy9hbGwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgdG90YWxzID0ge307XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gIHVwZGF0ZUNhcnMoMCk7XG4gIGNvbHVtbkdyYXBoKFwiI2Nvc3QtY2hhcnRcIiwgW1xuICAgIDEsIDEwLCAxNSwgMTUsIDM1LCA1MFxuICBdKTtcbiAgY29sdW1uR3JhcGgoXCIjaW52ZXN0bWVudC1jaGFydFwiLCBbXG4gICAgMSwgNSwgMTAsIDE1LCA0NSwgNTBcbiAgXSk7XG59KTtcblxuLy8gRWFjaCBzbGlkZXIncyB2YWx1ZSwgdG8gcGFzcyB0byBjYWxjdWxhdG9yXG5mdW5jdGlvbiBnZXRSYW5nZVZhbHVlcyAoKSB7XG4gIHJldHVybiB7XG4gICAgJ2Nhck51bWJlcic6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXJOdW1iZXInKS52YWx1ZSxcbiAgICAnc29sYXJOdW1iZXInOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc29sYXJOdW1iZXInKS52YWx1ZSxcbiAgICAnaG9tZU51bWJlcic6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdob21lTnVtYmVyJykudmFsdWUsXG4gICAgJ3Bvd2VyT2ZmTnVtYmVyJzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bvd2VyT2ZmTnVtYmVyJykudmFsdWUsXG4gICAgJ3dpbmRmYXJtTnVtYmVyJzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dpbmRmYXJtTnVtYmVyJykudmFsdWUsXG4gICAgJ2J1c051bWJlcic6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidXNOdW1iZXInKS52YWx1ZSxcbiAgICAnYmljeWNsZU51bWJlcic6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaWN5Y2xlTnVtYmVyJykudmFsdWVcbiAgfTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlQ2FycyAodmFsdWUpIHtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nhck51bWJlcicpLnZhbHVlID0gdmFsdWU7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXJSYW5nZScpLnZhbHVlID0gdmFsdWU7XG5cbiAgdmFyIGRhdGEgPSBzaG9ja2luZ1VwZGF0ZShnZXRSYW5nZVZhbHVlcygpKTtcblxuICBjb25zb2xlLmxvZyhcIkRhdGEgZnJvbSBzaG9ja2luZ1VwZGF0ZTogXCIsIGRhdGEpO1xuICB1cGRhdGVHcmFwaCgnZ3doLWNoYXJ0JywgZGF0YS5nZW5fcHJvZHVjdGlvbik7XG4gIHVwZGF0ZUdyYXBoKCdjbzItY2hhcnQnLCB7XG4gICAgJ0dlb3RoZXJtYWwnOiBkYXRhLmdlbl9lbWlzc2lvbnNbJ0dlb3RoZXJtYWwnXSxcbiAgICAnQ29hbCc6IGRhdGEuZ2VuX2VtaXNzaW9uc1snQ29hbCddLFxuICAgICdHYXMnOiBkYXRhLmdlbl9lbWlzc2lvbnNbJ0dhcyddLFxuICAgICdSb2FkJzogZGF0YS5mbGVldF9lbWlzc2lvbnNbJ1JvYWQnXVxuICB9KTtcbn1cblxuIiwiZnVuY3Rpb24gcHJlcHJvY2Vzc0RhdGEgKGRhdGEsIGRlbHRhKSB7XG4gIC8vIEhvcnJpYmxlIGtsdWRnZSB0byBnZXQgdGhpbmdzIHdvcmtpbmcgZm9yIHByb29mIG9mIGNvbmNlcHQuLi5cbiAgdmFyIHZhbHVlcyA9IFsxXTtcbiAgdmFyIHRvdGFsID0gMDtcbiAgZm9yICh2YXIgayBpbiBkYXRhKSB7XG4gICAgaWYoZGF0YS5oYXNPd25Qcm9wZXJ0eShrKSl7XG4gICAgICB0b3RhbCArPSBkYXRhW2tdO1xuICAgICAgdmFsdWVzLnB1c2goZGF0YVtrXSk7XG4gICAgfVxuICB9XG5cbiAgLy8gZGVsdGEgcmVwcmVzZW50cyBjaGFuZ2UgaW4gdG90YWwgdmFsdWVcbiAgaWYgKGRlbHRhID4gMCkge1xuICAgIHZhbHVlcy5wdXNoKGRlbHRhKTtcbiAgfVxuXG4gIC8vIE5lZWQgcGVyY2VudCB2YWx1ZXMgZm9yIGNoYXJ0XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgdmFsdWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFsdWVzW2ldID0gTWF0aC5yb3VuZCgodmFsdWVzW2ldIC8gdG90YWwpICogMTAwKTtcbiAgfVxuXG4gIHJldHVybiB2YWx1ZXM7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVRvdGFsKHRvdGFsSWQsIGRhdGEpIHtcbiAgdmFyIHRvdGFsID0gMDtcbiAgZm9yICh2YXIgayBpbiBkYXRhKSB7XG4gICAgaWYoZGF0YS5oYXNPd25Qcm9wZXJ0eShrKSl7XG4gICAgICB0b3RhbCArPSBkYXRhW2tdO1xuICAgIH1cbiAgfVxuICB0b3RhbCA9IE1hdGgucm91bmQodG90YWwpO1xuICBjb25zb2xlLmxvZyhcIlVwZGF0ZWQgdG90YWw6IFwiLCB0b3RhbCk7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRvdGFsSWQpLmlubmVySFRNTCA9IHRvdGFsO1xuXG4gIHJldHVybiB0b3RhbDtcbn1cblxuZnVuY3Rpb24gdXBkYXRlR3JhcGggKGJpbmRUbywgZGF0YSkge1xuICB2YXIgdyA9IDgwO1xuICB2YXIgaCA9IDMwMDtcblxuICBjb25zb2xlLmxvZyhcIkRhdGEgcGFzc2VkIGluOiBcIiwgZGF0YSk7XG4gIHZhciB0b3RhbElkID0gYmluZFRvLnNwbGl0KCctJylbMF0gKyAnLXRvdGFsJztcbiAgdmFyIG5ld1RvdGFsID0gdXBkYXRlVG90YWwodG90YWxJZCwgZGF0YSk7XG5cbiAgLy8gU3RvcmUgYXMgZ2xvYmFsIGZvciB0aGUgbGlmZSBvZiB0aGUgZG9jdW1lbnRcbiAgaWYgKCF0b3RhbHNbdG90YWxJZF0pIHtcbiAgICBjb25zb2xlLmxvZyhcIkVsZW1lbnQ6IFwiLHRvdGFsSWQsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRvdGFsSWQpLmlubmVySFRNTCk7XG4gICAgdG90YWxzW3RvdGFsSWRdID0gcGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodG90YWxJZCkuaW5uZXJIVE1MLCAxMCk7XG4gICAgY29uc29sZS5sb2coXCJUT1RBTFM6IFwiLCB0b3RhbHMpO1xuICB9XG4gIHZhciBkZWx0YSA9IHRvdGFsc1t0b3RhbElkXSAtIG5ld1RvdGFsO1xuXG4gIC8vIEhhY2t5OiByZW1vdmUgY2hhcnQgaWYgaXQgZXhpc3RzXG4gIC8vIFRPRE86IHRyYW5zaXRpb24hXG4gIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYmluZFRvKTtcbiAgd2hpbGUgKGVsZW1lbnQuZmlyc3RDaGlsZCkge1xuICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5maXJzdENoaWxkKTtcbiAgfVxuXG4gIHZhciBzdmcgPSBkMy5zZWxlY3QoJyMnICsgYmluZFRvKS5hcHBlbmQoXCJzdmc6c3ZnXCIpXG4gICAgLmF0dHIoXCJjbGFzc1wiLCBcImNoYXJ0XCIpXG4gICAgLmF0dHIoXCJ3aWR0aFwiLCB3KVxuICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGggKVxuICAgIC5hcHBlbmQoXCJzdmc6Z1wiKVxuICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyBoICsgXCIpXCIpO1xuXG4gIC8vIElmIGRpZmZlcmVuY2UgYmV0d2VlbiB0b3RhbHMgaXMgcG9zaXRpdmUsIGFuIGFkZGl0aW9uYWwgYXJyYXkgZWxlbWVudFxuICAvLyB3aWxsIGJlIGFkZGVkIHRvIHBhZCB0aGUgY2hhcnQgYXMgdGhlIHRvdGFsIHNocmlua3NcbiAgY29uc29sZS5sb2coXCJERUxUQTogXCIsIGRlbHRhKTtcbiAgdmFyIG1hdHJpeCA9IFtwcmVwcm9jZXNzRGF0YShkYXRhLCBkZWx0YSldO1xuXG4gIC8vIFJhbmRvbSBmb3Igbm93XG4gIHZhciBjb2xvcnMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXRyaXhbMF0ubGVuZ3RoIC0xOyBpKyspIHtcbiAgICBjb2xvcnMucHVzaCgncmdiKCcgKyByYW5kb21SR0IoKSArICcsJyArIHJhbmRvbVJHQigpICsgJywnICsgcmFuZG9tUkdCKCkgKyAnKScpO1xuXG4gICAgLy8gUGFkZGluZyBjb2xvdXJcbiAgICBpZiAoZGVsdGEgPiAwKSB7XG4gICAgICBjb2xvcnNbbWF0cml4WzBdLmxlbmd0aC0xXSA9IFwicmdiKDI1NSwyNTUsMjU1KVwiO1xuICAgIH1cbiAgfVxuXG4gIHggPSBkMy5zY2FsZS5vcmRpbmFsKCkucmFuZ2VSb3VuZEJhbmRzKFswLCB3XSk7XG4gIHkgPSBkMy5zY2FsZS5saW5lYXIoKS5yYW5nZShbMCwgaF0pO1xuICB6ID0gZDMuc2NhbGUub3JkaW5hbCgpLnJhbmdlKGNvbG9ycyk7XG5cbiAgLy8gQ29wZSB3aXRoIHZhcmlhYmxlIG51bWJlciBvZiBwcm9wZXJ0aWVzLCBmb3Igbm93XG4gIHZhciBhID0gW107XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgbWF0cml4WzBdLmxlbmd0aDsgaSsrKSB7XG4gICAgYS5wdXNoKFwiY1wiICsgaSk7XG4gIH1cbiAgLy92YXIgcmVtYXBwZWQgPSBbXCJjMVwiLFwiYzJcIixcImMzXCIsXCJjNFwiLFwiYzVcIl0ubWFwKGZ1bmN0aW9uKGRhdCxpKXtcbiAgdmFyIHJlbWFwcGVkID0gYS5tYXAoZnVuY3Rpb24oZGF0LGkpe1xuICAgIHJldHVybiBtYXRyaXgubWFwKGZ1bmN0aW9uKGQsaWkpe1xuICAgICAgcmV0dXJuIHt4OiBpaSwgeTogZFtpKzFdIH07XG4gICAgfSlcbiAgfSk7XG5cbiAgdmFyIHN0YWNrZWQgPSBkMy5sYXlvdXQuc3RhY2soKShyZW1hcHBlZClcblxuICB4LmRvbWFpbihzdGFja2VkWzBdLm1hcChmdW5jdGlvbihkKSB7IHJldHVybiBkLng7IH0pKTtcbiAgeS5kb21haW4oWzAsIGQzLm1heChzdGFja2VkW3N0YWNrZWQubGVuZ3RoIC0gMV0sIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueTAgKyBkLnk7IH0pXSk7XG5cbiAgdmFyIHZhbGdyb3VwID0gc3ZnLnNlbGVjdEFsbChcImcudmFsZ3JvdXBcIilcbiAgICAuZGF0YShzdGFja2VkKVxuICAgIC5lbnRlcigpLmFwcGVuZChcInN2ZzpnXCIpXG4gICAgLmF0dHIoXCJjbGFzc1wiLCBcInZhbGdyb3VwXCIpXG4gICAgLnN0eWxlKFwiZmlsbFwiLCBmdW5jdGlvbihkLCBpKSB7IHJldHVybiB6KGkpOyB9KVxuICAgIC5zdHlsZShcInN0cm9rZVwiLCBmdW5jdGlvbihkLCBpKSB7IHJldHVybiBkMy5yZ2IoeihpKSkuZGFya2VyKCk7IH0pO1xuXG4gIHZhciByZWN0ID0gdmFsZ3JvdXAuc2VsZWN0QWxsKFwicmVjdFwiKVxuICAgIC5kYXRhKGZ1bmN0aW9uKGQpe3JldHVybiBkO30pXG4gICAgLmVudGVyKCkuYXBwZW5kKFwic3ZnOnJlY3RcIilcbiAgICAuYXR0cihcInhcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4geChkLngpOyB9KVxuICAgIC5hdHRyKFwieVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiAteShkLnkwKSAtIHkoZC55KTsgfSlcbiAgICAuYXR0cihcImhlaWdodFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiB5KGQueSk7IH0pXG4gICAgLmF0dHIoXCJ3aWR0aFwiLCBNYXRoLm1pbi5hcHBseShudWxsLCBbeC5yYW5nZUJhbmQoKS0yLCAxMDBdKSk7XG59XG5cbmZ1bmN0aW9uIHJhbmRvbVJHQiAoKSB7XG4gIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNTYpO1xufVxuXG5mdW5jdGlvbiBjb2x1bW5HcmFwaCAoYmluZFRvLCB2YWx1ZXMpIHtcbiAgdmFyIHcgPSA4MDtcbiAgdmFyIGggPSAzMDA7XG5cbiAgdmFyIHN2ZyA9IGQzLnNlbGVjdChiaW5kVG8pLmFwcGVuZChcInN2ZzpzdmdcIilcbiAgICAuYXR0cihcImNsYXNzXCIsIFwiY2hhcnRcIilcbiAgICAuYXR0cihcIndpZHRoXCIsIHcpXG4gICAgLmF0dHIoXCJoZWlnaHRcIiwgaCApXG4gICAgLmFwcGVuZChcInN2ZzpnXCIpXG4gICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCwzMDApXCIpO1xuXG4gIHZhciBtYXRyaXggPSBbdmFsdWVzXTtcblxuICAvLyBSYW5kb20gZm9yIG5vd1xuICB2YXIgY29sb3JzID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbWF0cml4WzBdLmxlbmd0aCAtMTsgaSsrKSB7XG4gICAgY29sb3JzLnB1c2goJ3JnYignICsgcmFuZG9tUkdCKCkgKyAnLCcgKyByYW5kb21SR0IoKSArICcsJyArIHJhbmRvbVJHQigpICsgJyknKTtcbiAgfVxuXG4gIHggPSBkMy5zY2FsZS5vcmRpbmFsKCkucmFuZ2VSb3VuZEJhbmRzKFswLCB3XSk7XG4gIHkgPSBkMy5zY2FsZS5saW5lYXIoKS5yYW5nZShbMCwgaF0pO1xuICB6ID0gZDMuc2NhbGUub3JkaW5hbCgpLnJhbmdlKGNvbG9ycyk7XG5cbiAgdmFyIHJlbWFwcGVkID1bXCJjMVwiLFwiYzJcIixcImMzXCIsXCJjNFwiLFwiYzVcIl0ubWFwKGZ1bmN0aW9uKGRhdCxpKXtcbiAgICByZXR1cm4gbWF0cml4Lm1hcChmdW5jdGlvbihkLGlpKXtcbiAgICAgIHJldHVybiB7eDogaWksIHk6IGRbaSsxXSB9O1xuICAgIH0pXG4gIH0pO1xuXG4gIHZhciBzdGFja2VkID0gZDMubGF5b3V0LnN0YWNrKCkocmVtYXBwZWQpO1xuXG4gIHguZG9tYWluKHN0YWNrZWRbMF0ubWFwKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueDsgfSkpO1xuICB5LmRvbWFpbihbMCwgZDMubWF4KHN0YWNrZWRbc3RhY2tlZC5sZW5ndGggLSAxXSwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC55MCArIGQueTsgfSldKTtcblxuICB2YXIgdmFsZ3JvdXAgPSBzdmcuc2VsZWN0QWxsKFwiZy52YWxncm91cFwiKVxuICAgIC5kYXRhKHN0YWNrZWQpXG4gICAgLmVudGVyKCkuYXBwZW5kKFwic3ZnOmdcIilcbiAgICAuYXR0cihcImNsYXNzXCIsIFwidmFsZ3JvdXBcIilcbiAgICAuc3R5bGUoXCJmaWxsXCIsIGZ1bmN0aW9uKGQsIGkpIHsgcmV0dXJuIHooaSk7IH0pXG4gICAgLnN0eWxlKFwic3Ryb2tlXCIsIGZ1bmN0aW9uKGQsIGkpIHsgcmV0dXJuIGQzLnJnYih6KGkpKS5kYXJrZXIoKTsgfSk7XG5cbiAgdmFyIHJlY3QgPSB2YWxncm91cC5zZWxlY3RBbGwoXCJyZWN0XCIpXG4gICAgLmRhdGEoZnVuY3Rpb24oZCl7cmV0dXJuIGQ7fSlcbiAgICAuZW50ZXIoKS5hcHBlbmQoXCJzdmc6cmVjdFwiKVxuICAgIC5hdHRyKFwieFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiB4KGQueCk7IH0pXG4gICAgLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIC15KGQueTApIC0geShkLnkpOyB9KVxuICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHkoZC55KTsgfSlcbiAgICAuYXR0cihcIndpZHRoXCIsIE1hdGgubWluLmFwcGx5KG51bGwsIFt4LnJhbmdlQmFuZCgpLTIsIDEwMF0pKTtcbn1cblxuIiwiLy8gcmVmZXJlbmNlOiBodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9zcHJlYWRzaGVldHMvZC8xcmpaWmcxOWdINFNUM1hGZlBhVW12Z0M5MEFDS2dSdzh4LU1nb296a0xmSS9lZGl0I2dpZD0wXG5cblxuZnVuY3Rpb24gc2hvY2tpbmdVcGRhdGUoaW5wdXRzKSB7XG5cblx0Y29uc29sZS5sb2coXCJzaG9ja2luZ1VwZGF0ZSAtIElucHV0czogXCIgKyBKU09OLnN0cmluZ2lmeShpbnB1dHMpKTtcblxuXHR2YXIgYmFzZWxpbmUgPSBnZXRCYXNlbGluZSgpO1xuXHR2YXIgZ2VuX3Byb2R1Y3Rpb24gPSBiYXNlbGluZVsnZ2VuX3Byb2R1Y3Rpb24nXTtcblx0dmFyIGdlbl9lbWlzc2lvbnMgID0gYmFzZWxpbmVbJ2dlbl9lbWlzc2lvbnMnXTtcblx0dmFyIGdlbl9jb3N0ICAgICAgID0gYmFzZWxpbmVbJ2dlbl9jb3N0J107XG5cblx0Ly8gYW5udWFsIHZlaGljbGUgZmxlZXQgZW1pc3Npb25zIGluIEtpbG90b25zIG9mIENPMiBFcXVpdmFsZW50XG5cdHZhciBmbGVldF9lbWlzc2lvbnMgPSB7XG5cdFx0J1JvYWQnOiAxMjY4OFxuXHR9XG4gXG5cdC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdC8vIEJ1c2luZXNzIGxvZ2ljXG5cdC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdFxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyBbMV0gRWxlY3RyaWMgY2Fyc1xuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLVxuXG5cdC8vIEFTU1VNUFRJT046IHRoZXJlIGFyZSBlc3NlbnRpYWxseSAwIGVsZWN0cmljIGNhcnMgaW4gdGhlIGN1cnJlbnQgZmxlZXRcblx0dmFyIGNhck51bWJlciA9IGlucHV0c1snY2FyTnVtYmVyJ107XG5cdHZhciBlbGVjdHJpY19wY3QgPSBjYXJOdW1iZXIvMTAwO1xuXG5cdGZsZWV0X2VtaXNzaW9uc1snUm9hZCddID0gZmxlZXRfZW1pc3Npb25zWydSb2FkJ10gKiAoMS1lbGVjdHJpY19wY3QpO1xuXG5cdC8vIEFTU1VNUFRJT046IGFueSB1cHRpY2sgaW4gcG93ZXIgZ2VuZXJhdGlvbiByZXF1aXJlZCB0byBtZWV0XG5cdC8vIGVsZWN0cmljIGNhciBkZW1hbmQsIHdpbGwgYmUgbWV0IHByb3BvcnRpb25hbGx5IGJ5IGFsbCBnZW5lcmF0aW9uIHNvdXJjZXNcblx0Ly8gQVNTVU1QVElPTjogdHlwaWNhbCBFViB3aWxsIHVzZSAwLjIga1doIGZvciAxIGttIHRyYXZlbGxlZFxuXHQvLyBhdmVyYWdlIHRyYXZlbCBpcyAxMjAzMiBrbSBwZXIgeWVhclxuXHQvLyBmbGVldCBzaXplIGlzIDMzNDEwMTNcblx0ZXZfcG93ZXJfcmVxdHMgPSAxMjAzMiAqIDAuMiAqIDMzNDEwMTMgKiBlbGVjdHJpY19wY3Q7XG5cdFxuXHQvLyBjb252ZXJ0IGt3aCB0byBnd2hcblx0ZXZfcG93ZXJfcmVxdHMgPSBldl9wb3dlcl9yZXF0cyAvIDEwMDAwMDA7XG5cblx0Ly8gd29yayBvdXQgdG90YWwgY3VycmVudCBnZW5lcmF0aW9uXG5cdHZhciB0b3RhbF9nZW4gPSAwO1xuXHRmb3IgKHZhciBrZXkgaW4gZ2VuX3Byb2R1Y3Rpb24pIHtcblx0XHR0b3RhbF9nZW4gKz0gZ2VuX3Byb2R1Y3Rpb25ba2V5XTtcblx0fVxuXG5cdHZhciBpbmNyZWFzZV9pbl9wb3dlcl9yZXF0cyA9IDEgKyAoZXZfcG93ZXJfcmVxdHMgLyB0b3RhbF9nZW4pO1xuXHRjb25zb2xlLmxvZygndG90YWw6ICcgKyB0b3RhbF9nZW4pO1xuXHRjb25zb2xlLmxvZygnaW5jcmVhc2UgZnJvbSBlbGVjdHJpYyB2ZWhpY2xlczogJyArIGluY3JlYXNlX2luX3Bvd2VyX3JlcXRzKTtcblxuXHRjb25zb2xlLmxvZygnZXZfcG93ZXJfcmVxdHMgJyArIGV2X3Bvd2VyX3JlcXRzKTtcblxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyBbMl0gU29sYXIgSG91c2VzXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tXG5cdHZhciBzb2xhck51bWJlciA9IGlucHV0c1snc29sYXJOdW1iZXInXTtcblxuXHQvLyBBU1NVTVBUSU9OIC0gZWFjaCBob3VzZWhvbGQgZ2VuZXJhdGVzIDUyNjAgS1doIHBlciB5ZWFyXG5cdHZhciBzb2xhcl9wcm9kdWN0aW9uID0gaW5wdXRzWydzb2xhck51bWJlciddICogNTI2MDtcblx0Ly8gY29udmVydCB0byBHd2hcblx0c29sYXJfcHJvZHVjdGlvbiA9IHNvbGFyX3Byb2R1Y3Rpb24gLyAxMDAwMDAwO1xuXG5cdGNvbnNvbGUubG9nKCdzb2xhciBwcm9kdWN0aW9uOiAnICsgc29sYXJfcHJvZHVjdGlvbik7XG5cdFxuXHQvLyByZWR1Y2UgcHJvcG9ydGlvbmFsbHkgYWxsIHRoZSBvdGhlciBwcm9kdWN0aW9uIGFuZCBlbWlzc2lvbnNcblx0dmFyIGRlY3JlYXNlX2R1ZV90b19zb2xhciA9IHNvbGFyX3Byb2R1Y3Rpb24gLyB0b3RhbF9nZW47XG5cdGluY3JlYXNlX2luX3Bvd2VyX3JlcXRzIC09IGRlY3JlYXNlX2R1ZV90b19zb2xhcjtcblx0XG5cdGZvciAodmFyIGtleSBpbiBnZW5fZW1pc3Npb25zKSB7XG5cdFx0Z2VuX2VtaXNzaW9uc1trZXldID0gZ2VuX2VtaXNzaW9uc1trZXldICogaW5jcmVhc2VfaW5fcG93ZXJfcmVxdHM7XG5cdH1cblxuXHQvLyBhcHBseSB0aGUgZmFjdG9yIHRvIHRoZSBwcm9kdWN0aW9uXG5cdGZvciAodmFyIGtleSBpbiBnZW5fcHJvZHVjdGlvbikge1xuXHRcdGdlbl9wcm9kdWN0aW9uW2tleV0gPSBnZW5fcHJvZHVjdGlvbltrZXldICogaW5jcmVhc2VfaW5fcG93ZXJfcmVxdHM7XG5cdH1cblxuXHQvLyBub3cgYWRkIGluIHRoZSBzb2xhclxuXHRnZW5fcHJvZHVjdGlvblsnU29sYXInXSA9IHNvbGFyX3Byb2R1Y3Rpb247XG5cblx0Ly8gbm93IGFwcGx5IHRoYXQgZmFjdG9yIHRvIHRoZSBlbWlzc2lvbnMgLSBlbWlzc2lvbnMgZnJvbSBFViBwb3dlciByZXF1aXJlbWVudHNcblx0Zm9yICh2YXIga2V5IGluIGdlbl9lbWlzc2lvbnMpIHtcblx0XHRnZW5fZW1pc3Npb25zW2tleV0gPSBnZW5fZW1pc3Npb25zW2tleV0gKiBpbmNyZWFzZV9pbl9wb3dlcl9yZXF0cztcblx0fVxuXG5cdC8vIGFsc28gYXBwbHkgdGhlIHNhbWUgZmFjdG9yIHRvIHRoZSBnZW5lcmF0aW9uIGNvc3Rcblx0Zm9yICh2YXIga2V5IGluIGdlbl9jb3N0KSB7XG5cdFx0Z2VuX2Nvc3Rba2V5XSA9IGdlbl9jb3N0W2tleV0gKiBpbmNyZWFzZV9pbl9wb3dlcl9yZXF0cztcblx0fVxuXG5cdC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdC8vIE91dHB1dFxuXHQvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXHR2YXIgcmVzdWx0ID0ge1xuXHRcdCdnZW5fcHJvZHVjdGlvbic6IGdlbl9wcm9kdWN0aW9uLFxuXHRcdCdnZW5fZW1pc3Npb25zJzogZ2VuX2VtaXNzaW9ucyxcblx0XHQnZ2VuX2Nvc3QnOiBnZW5fY29zdCxcblx0XHQnZmxlZXRfZW1pc3Npb25zJzogZmxlZXRfZW1pc3Npb25zXG5cdH1cblxuXHRjb25zb2xlLmxvZyhcIlJlc3VsdDogXCIgKyBKU09OLnN0cmluZ2lmeShyZXN1bHQpKTtcblxuXHRyZXR1cm4gcmVzdWx0O1xufVxuXG5cbmZ1bmN0aW9uIGdldEJhc2VsaW5lKCkge1xuXG5cdC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdC8vIEJhc2VsaW5lIGRhdGEgOiAyMDEzLzIwMTRcblx0Ly8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuXHQvLyBhbm51YWwgZ2VuZXJhdGlvbiBpbiBHaWdhd2F0dCBIb3Vyc1xuXHR2YXIgZ2VuX3Byb2R1Y3Rpb24gPSB7XG5cdFx0J0h5ZHJvJzogMjQwOTUsXG5cdFx0J0dlb3RoZXJtYWwnOiA2NDg3LFxuXHRcdCdXaW5kJzogMjE4Nyxcblx0XHQnQ29hbCc6IDE4MzIsXG5cdFx0J0dhcyc6IDY2MjZcblx0fVxuXG5cdC8vIGFubnVhbCBnZW5lcmF0aW9uIGVtaXNzaW9ucyBpbiBLaWxvdG9ucyBvZiBDTzIgRXF1aXZhbGVudFxuXHR2YXIgZ2VuX2VtaXNzaW9ucyA9IHtcblx0XHQnSHlkcm8nOiAwLFxuXHRcdCdHZW90aGVybWFsJzogODQ3LjMyLFxuXHRcdCdXaW5kJzogMCxcblx0XHQnQ29hbCc6IDEyMjIuMixcblx0XHQnR2FzJzogMzQwNS41MVxuXHR9XG5cblx0Ly8gYW5udWFsIGdlbmVyYXRpb24gY29zdHMgaW4gJE5aIHBlciB5ZWFyIChJIHRoaW5rKVxuXHR2YXIgZ2VuX2Nvc3QgPSB7XG5cdFx0J0h5ZHJvJzogNTM4NzIxODAsXG5cdFx0J0dlb3RoZXJtYWwnOiA1OTUzNTAwMCxcblx0XHQnV2luZCc6IDQzNDg0MDAwLFxuXHRcdCdDb2FsJzogMzQxNzcyMDAsXG5cdFx0J0dhcyc6IDE2MTA0NDE5MlxuXHR9XG5cblx0dmFyIHJlc3VsdCA9IHtcblx0XHQnZ2VuX3Byb2R1Y3Rpb24nOiBnZW5fcHJvZHVjdGlvbixcblx0XHQnZ2VuX2VtaXNzaW9ucyc6IGdlbl9lbWlzc2lvbnMsXG5cdFx0J2dlbl9jb3N0JzogZ2VuX2Nvc3QsXG5cdH1cblxuXHRyZXR1cm4gcmVzdWx0O1xufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9