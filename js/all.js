function updateCars(t){document.getElementById("carNumber").value=t,document.getElementById("carRange").value=t,updateGraph("#gwh-chart",mockAdjustGWh())}function columnGraph(t,n){for(var r=80,a=300,e=d3.select(t).append("svg:svg").attr("class","chart").attr("width",r).attr("height",a).append("svg:g").attr("transform","translate(0,300)"),o=[n],c=[],u=0;u<o[0].length-1;u++)c.push("rgb("+randomRGB()+","+randomRGB()+","+randomRGB()+")");x=d3.scale.ordinal().rangeRoundBands([0,r]),y=d3.scale.linear().range([0,a]),z=d3.scale.ordinal().range(c);var d=["c1","c2","c3","c4","c5"].map(function(t,n){return o.map(function(t,r){return{x:r,y:t[n+1]}})}),l=d3.layout.stack()(d);x.domain(l[0].map(function(t){return t.x})),y.domain([0,d3.max(l[l.length-1],function(t){return t.y0+t.y})]);{var s=e.selectAll("g.valgroup").data(l).enter().append("svg:g").attr("class","valgroup").style("fill",function(t,n){return z(n)}).style("stroke",function(t,n){return d3.rgb(z(n)).darker()});s.selectAll("rect").data(function(t){return t}).enter().append("svg:rect").attr("x",function(t){return x(t.x)}).attr("y",function(t){return-y(t.y0)-y(t.y)}).attr("height",function(t){return y(t.y)}).attr("width",Math.min.apply(null,[x.rangeBand()-2,100]))}}function preprocessData(t){var n=[1],r=0;for(var a in t)t.hasOwnProperty(a)&&(r+=t[a],n.push(t[a]));for(var e=1;e<n.length;e++)n[e]=Math.round(n[e]/r*100);return n}function updateGraph(t,n){for(var r=80,a=300,e=d3.select(t).append("svg:svg").attr("class","chart").attr("width",r).attr("height",a).append("svg:g").attr("transform","translate(0,"+a+")"),o=[preprocessData(n)],c=[],u=0;u<o[0].length-1;u++)c.push("rgb("+randomRGB()+","+randomRGB()+","+randomRGB()+")");x=d3.scale.ordinal().rangeRoundBands([0,r]),y=d3.scale.linear().range([0,a]),z=d3.scale.ordinal().range(c);var d=["c1","c2","c3","c4","c5"].map(function(t,n){return o.map(function(t,r){return{x:r,y:t[n+1]}})}),l=d3.layout.stack()(d);x.domain(l[0].map(function(t){return t.x})),y.domain([0,d3.max(l[l.length-1],function(t){return t.y0+t.y})]);{var s=e.selectAll("g.valgroup").data(l).enter().append("svg:g").attr("class","valgroup").style("fill",function(t,n){return z(n)}).style("stroke",function(t,n){return d3.rgb(z(n)).darker()});s.selectAll("rect").data(function(t){return t}).enter().append("svg:rect").attr("x",function(t){return x(t.x)}).attr("y",function(t){return-y(t.y0)-y(t.y)}).attr("height",function(t){return y(t.y)}).attr("width",Math.min.apply(null,[x.rangeBand()-2,100]))}}function randomRGB(){return Math.floor(256*Math.random())}function shockingUpdate(t){var n={Hydro:24095,Geothermal:6487,Wind:2187,Coal:1832,Gas:6626},r={Hydro:0,Geothermal:847.32,Wind:0,Coal:1222.2,Gas:3405.51},a={Road:12688},e={gen_production:n,gen_emissions:r,fleet_emissions:a};return console.log("Result: "+JSON.stringify(e)),e}function mockGWh(){return{Hydro:24095,Geothermal:6487,Wind:2187,Coal:1832,Gas:6626}}function mockAdjustGWh(){return{Hydro:24095,Geothermal:6487,Wind:2187,Coal:1832,Gas:6626}}function mockGenerationEmissions(){return{Hydro:0,Geothermal:847.32,Wind:0,Coal:1222.2,Gas:3405.51}}function mockFleetEmissions(){return{Road:12688}}document.addEventListener("DOMContentLoaded",function(t){columnGraph("#co2-chart",[1,10,20,20,25,50]),updateGraph("#gwh-chart",mockGWh()),columnGraph("#cost-chart",[1,10,15,15,35,50]),columnGraph("#investment-chart",[1,5,10,15,45,50])});var input_test={electric_cars:1};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNoYXJ0LmpzIiwiZW5naW5lLmpzIiwibW9jay5qcyJdLCJuYW1lcyI6WyJ1cGRhdGVDYXJzIiwidmFsdWUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidXBkYXRlR3JhcGgiLCJtb2NrQWRqdXN0R1doIiwiY29sdW1uR3JhcGgiLCJiaW5kVG8iLCJ2YWx1ZXMiLCJ3IiwiaCIsInN2ZyIsImQzIiwic2VsZWN0IiwiYXBwZW5kIiwiYXR0ciIsIm1hdHJpeCIsImNvbG9ycyIsImkiLCJsZW5ndGgiLCJwdXNoIiwicmFuZG9tUkdCIiwieCIsInNjYWxlIiwib3JkaW5hbCIsInJhbmdlUm91bmRCYW5kcyIsInkiLCJsaW5lYXIiLCJyYW5nZSIsInoiLCJyZW1hcHBlZCIsIm1hcCIsImRhdCIsImQiLCJpaSIsInN0YWNrZWQiLCJsYXlvdXQiLCJzdGFjayIsImRvbWFpbiIsIm1heCIsInkwIiwidmFsZ3JvdXAiLCJzZWxlY3RBbGwiLCJkYXRhIiwiZW50ZXIiLCJzdHlsZSIsInJnYiIsImRhcmtlciIsIk1hdGgiLCJtaW4iLCJhcHBseSIsInJhbmdlQmFuZCIsInByZXByb2Nlc3NEYXRhIiwidG90YWwiLCJrIiwiaGFzT3duUHJvcGVydHkiLCJyb3VuZCIsImZsb29yIiwicmFuZG9tIiwic2hvY2tpbmdVcGRhdGUiLCJpbnB1dHMiLCJnZW5fcHJvZHVjdGlvbiIsIkh5ZHJvIiwiR2VvdGhlcm1hbCIsIldpbmQiLCJDb2FsIiwiR2FzIiwiZ2VuX2VtaXNzaW9ucyIsImZsZWV0X2VtaXNzaW9ucyIsIlJvYWQiLCJyZXN1bHQiLCJjb25zb2xlIiwibG9nIiwiSlNPTiIsInN0cmluZ2lmeSIsIm1vY2tHV2giLCJtb2NrR2VuZXJhdGlvbkVtaXNzaW9ucyIsIm1vY2tGbGVldEVtaXNzaW9ucyIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImlucHV0X3Rlc3QiLCJlbGVjdHJpY19jYXJzIl0sIm1hcHBpbmdzIjoiQUFpQkEsUUFBQUEsWUFB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QyxNQUFBLE1BQUE1QixFQUFBNkIsWUFBQSxFQUFBLFFBR0EsUUFBQTlCLGFBQ0EsTUFBQTJCLE1BQUFTLE1BQUEsSUFBQVQsS0FBQVUsVUNqSEEsUUFBQUMsZ0JBQUFDLEdBT0EsR0FBQUMsSUFDQUMsTUFBQSxNQUNBQyxXQUFBLEtBQ0FDLEtBQUEsS0FDQUMsS0FBQSxLQUNBQyxJQUFBLE1BSUFDLEdBQ0FMLE1BQUEsRUFDQUMsV0FBQSxPQUNBQyxLQUFBLEVBQ0FDLEtBQUEsT0FDQUMsSUFBQSxTQUlBRSxHQUNBQyxLQUFBLE9BU0FDLEdBQ0FULGVBQUFBLEVBQ0FNLGNBQUFBLEVBQ0FDLGdCQUFBQSxFQUtBLE9BRkFHLFNBQUFDLElBQUEsV0FBQUMsS0FBQUMsVUFBQUosSUFFQUEsRUNsREEsUUFBQUssV0FDQSxPQUNBYixNQUFBLE1BQ0FDLFdBQUEsS0FDQUMsS0FBQSxLQUNBQyxLQUFBLEtBQ0FDLElBQUEsTUFJQSxRQUFBN0QsaUJBQ0EsT0FDQXlELE1BQUEsTUFDQUMsV0FBQSxLQUNBQyxLQUFBLEtBQ0FDLEtBQUEsS0FDQUMsSUFBQSxNQUlBLFFBQUFVLDJCQUNBLE9BQ0FkLE1BQUEsRUFDQUMsV0FBQSxPQUNBQyxLQUFBLEVBQ0FDLEtBQUEsT0FDQUMsSUFBQSxTQUlBLFFBQUFXLHNCQUNBLE9BQ0FSLEtBQUEsT0hoQ0FuRSxTQUFBNEUsaUJBQUEsbUJBQUEsU0FBQUMsR0FDQXpFLFlBQUEsY0FDQSxFQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsS0FFQUYsWUFBQSxhQUFBdUUsV0FJQXJFLFlBQUEsZUFDQSxFQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsS0FFQUEsWUFBQSxxQkFDQSxFQUFBLEVBQUEsR0FBQSxHQUFBLEdBQUEsTUVYQSxJQUFBMEUsYUFFQUMsY0FBQSIsImZpbGUiOiJqcy9hbGwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbihldmVudCkge1xuICBjb2x1bW5HcmFwaChcIiNjbzItY2hhcnRcIiwgW1xuICAgIDEsIDEwLCAyMCwgMjAsIDI1LCA1MFxuICBdKTtcbiAgdXBkYXRlR3JhcGgoJyNnd2gtY2hhcnQnLCBtb2NrR1doKCkpO1xuICAvL2NvbHVtbkdyYXBoKFwiI2d3aC1jaGFydFwiLCBbXG4gICAgLy8xLCAxMCwgMTUsIDIwLCAzMCwgNTBcbiAgLy9dKTtcbiAgY29sdW1uR3JhcGgoXCIjY29zdC1jaGFydFwiLCBbXG4gICAgMSwgMTAsIDE1LCAxNSwgMzUsIDUwXG4gIF0pO1xuICBjb2x1bW5HcmFwaChcIiNpbnZlc3RtZW50LWNoYXJ0XCIsIFtcbiAgICAxLCA1LCAxMCwgMTUsIDQ1LCA1MFxuICBdKTtcbn0pO1xuXG5cbmZ1bmN0aW9uIHVwZGF0ZUNhcnMgKHZhbHVlKSB7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXJOdW1iZXInKS52YWx1ZSA9IHZhbHVlO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FyUmFuZ2UnKS52YWx1ZSA9IHZhbHVlO1xuICB1cGRhdGVHcmFwaCgnI2d3aC1jaGFydCcsIG1vY2tBZGp1c3RHV2goKSk7IFxufVxuXG4iLCJmdW5jdGlvbiBjb2x1bW5HcmFwaCAoYmluZFRvLCB2YWx1ZXMpIHtcbiAgdmFyIHcgPSA4MDtcbiAgdmFyIGggPSAzMDA7XG5cbiAgdmFyIHN2ZyA9IGQzLnNlbGVjdChiaW5kVG8pLmFwcGVuZChcInN2ZzpzdmdcIilcbiAgICAuYXR0cihcImNsYXNzXCIsIFwiY2hhcnRcIilcbiAgICAuYXR0cihcIndpZHRoXCIsIHcpXG4gICAgLmF0dHIoXCJoZWlnaHRcIiwgaCApXG4gICAgLmFwcGVuZChcInN2ZzpnXCIpXG4gICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCwzMDApXCIpO1xuXG4gIHZhciBtYXRyaXggPSBbdmFsdWVzXTtcblxuICAvLyBSYW5kb20gZm9yIG5vd1xuICB2YXIgY29sb3JzID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbWF0cml4WzBdLmxlbmd0aCAtMTsgaSsrKSB7XG4gICAgY29sb3JzLnB1c2goJ3JnYignICsgcmFuZG9tUkdCKCkgKyAnLCcgKyByYW5kb21SR0IoKSArICcsJyArIHJhbmRvbVJHQigpICsgJyknKTtcbiAgfVxuXG4gIHggPSBkMy5zY2FsZS5vcmRpbmFsKCkucmFuZ2VSb3VuZEJhbmRzKFswLCB3XSk7XG4gIHkgPSBkMy5zY2FsZS5saW5lYXIoKS5yYW5nZShbMCwgaF0pO1xuICB6ID0gZDMuc2NhbGUub3JkaW5hbCgpLnJhbmdlKGNvbG9ycyk7XG5cbiAgdmFyIHJlbWFwcGVkID1bXCJjMVwiLFwiYzJcIixcImMzXCIsXCJjNFwiLFwiYzVcIl0ubWFwKGZ1bmN0aW9uKGRhdCxpKXtcbiAgICByZXR1cm4gbWF0cml4Lm1hcChmdW5jdGlvbihkLGlpKXtcbiAgICAgIHJldHVybiB7eDogaWksIHk6IGRbaSsxXSB9O1xuICAgIH0pXG4gIH0pO1xuXG4gIHZhciBzdGFja2VkID0gZDMubGF5b3V0LnN0YWNrKCkocmVtYXBwZWQpXG5cbiAgeC5kb21haW4oc3RhY2tlZFswXS5tYXAoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC54OyB9KSk7XG4gIHkuZG9tYWluKFswLCBkMy5tYXgoc3RhY2tlZFtzdGFja2VkLmxlbmd0aCAtIDFdLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnkwICsgZC55OyB9KV0pO1xuXG4gIHZhciB2YWxncm91cCA9IHN2Zy5zZWxlY3RBbGwoXCJnLnZhbGdyb3VwXCIpXG4gICAgLmRhdGEoc3RhY2tlZClcbiAgICAuZW50ZXIoKS5hcHBlbmQoXCJzdmc6Z1wiKVxuICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJ2YWxncm91cFwiKVxuICAgIC5zdHlsZShcImZpbGxcIiwgZnVuY3Rpb24oZCwgaSkgeyByZXR1cm4geihpKTsgfSlcbiAgICAuc3R5bGUoXCJzdHJva2VcIiwgZnVuY3Rpb24oZCwgaSkgeyByZXR1cm4gZDMucmdiKHooaSkpLmRhcmtlcigpOyB9KTtcblxuICB2YXIgcmVjdCA9IHZhbGdyb3VwLnNlbGVjdEFsbChcInJlY3RcIilcbiAgICAuZGF0YShmdW5jdGlvbihkKXtyZXR1cm4gZDt9KVxuICAgIC5lbnRlcigpLmFwcGVuZChcInN2ZzpyZWN0XCIpXG4gICAgLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHgoZC54KTsgfSlcbiAgICAuYXR0cihcInlcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gLXkoZC55MCkgLSB5KGQueSk7IH0pXG4gICAgLmF0dHIoXCJoZWlnaHRcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4geShkLnkpOyB9KVxuICAgIC5hdHRyKFwid2lkdGhcIiwgTWF0aC5taW4uYXBwbHkobnVsbCwgW3gucmFuZ2VCYW5kKCktMiwgMTAwXSkpO1xufVxuXG5mdW5jdGlvbiBwcmVwcm9jZXNzRGF0YSAoZGF0YSkge1xuICAvLyBIb3JyaWJsZSBrbHVkZ2UgdG8gZ2V0IHRoaW5ncyB3b3JraW5nIGZvciBwcm9vZiBvZiBjb25jZXB0Li4uXG4gIHZhciB2YWx1ZXMgPSBbMV07XG4gIHZhciB0b3RhbCA9IDA7XG4gIGZvciAodmFyIGsgaW4gZGF0YSkge1xuICAgIGlmKGRhdGEuaGFzT3duUHJvcGVydHkoaykpe1xuICAgICAgdG90YWwgKz0gZGF0YVtrXTtcbiAgICAgIHZhbHVlcy5wdXNoKGRhdGFba10pO1xuICAgIH1cbiAgfVxuXG4gIC8vIE5lZWQgcGVyY2VudCB2YWx1ZXMgZm9yIGNoYXJ0XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgdmFsdWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFsdWVzW2ldID0gTWF0aC5yb3VuZCgodmFsdWVzW2ldIC8gdG90YWwpICogMTAwKTtcbiAgfVxuXG4gIHJldHVybiB2YWx1ZXM7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUdyYXBoIChiaW5kVG8sIGRhdGEpIHtcbiAgdmFyIHcgPSA4MDtcbiAgdmFyIGggPSAzMDA7XG5cbiAgdmFyIHN2ZyA9IGQzLnNlbGVjdChiaW5kVG8pLmFwcGVuZChcInN2ZzpzdmdcIilcbiAgICAuYXR0cihcImNsYXNzXCIsIFwiY2hhcnRcIilcbiAgICAuYXR0cihcIndpZHRoXCIsIHcpXG4gICAgLmF0dHIoXCJoZWlnaHRcIiwgaCApXG4gICAgLmFwcGVuZChcInN2ZzpnXCIpXG4gICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCxcIiArIGggKyBcIilcIik7XG5cbiAgdmFyIG1hdHJpeCA9IFtwcmVwcm9jZXNzRGF0YShkYXRhKV07XG5cbiAgLy8gUmFuZG9tIGZvciBub3dcbiAgdmFyIGNvbG9ycyA9IFtdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG1hdHJpeFswXS5sZW5ndGggLTE7IGkrKykge1xuICAgIGNvbG9ycy5wdXNoKCdyZ2IoJyArIHJhbmRvbVJHQigpICsgJywnICsgcmFuZG9tUkdCKCkgKyAnLCcgKyByYW5kb21SR0IoKSArICcpJyk7XG4gIH1cblxuICB4ID0gZDMuc2NhbGUub3JkaW5hbCgpLnJhbmdlUm91bmRCYW5kcyhbMCwgd10pO1xuICB5ID0gZDMuc2NhbGUubGluZWFyKCkucmFuZ2UoWzAsIGhdKTtcbiAgeiA9IGQzLnNjYWxlLm9yZGluYWwoKS5yYW5nZShjb2xvcnMpO1xuXG4gIHZhciByZW1hcHBlZCA9IFtcImMxXCIsXCJjMlwiLFwiYzNcIixcImM0XCIsXCJjNVwiXS5tYXAoZnVuY3Rpb24oZGF0LGkpe1xuICAgIHJldHVybiBtYXRyaXgubWFwKGZ1bmN0aW9uKGQsaWkpe1xuICAgICAgcmV0dXJuIHt4OiBpaSwgeTogZFtpKzFdIH07XG4gICAgfSlcbiAgfSk7XG5cbiAgdmFyIHN0YWNrZWQgPSBkMy5sYXlvdXQuc3RhY2soKShyZW1hcHBlZClcblxuICB4LmRvbWFpbihzdGFja2VkWzBdLm1hcChmdW5jdGlvbihkKSB7IHJldHVybiBkLng7IH0pKTtcbiAgeS5kb21haW4oWzAsIGQzLm1heChzdGFja2VkW3N0YWNrZWQubGVuZ3RoIC0gMV0sIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueTAgKyBkLnk7IH0pXSk7XG5cbiAgdmFyIHZhbGdyb3VwID0gc3ZnLnNlbGVjdEFsbChcImcudmFsZ3JvdXBcIilcbiAgICAuZGF0YShzdGFja2VkKVxuICAgIC5lbnRlcigpLmFwcGVuZChcInN2ZzpnXCIpXG4gICAgLmF0dHIoXCJjbGFzc1wiLCBcInZhbGdyb3VwXCIpXG4gICAgLnN0eWxlKFwiZmlsbFwiLCBmdW5jdGlvbihkLCBpKSB7IHJldHVybiB6KGkpOyB9KVxuICAgIC5zdHlsZShcInN0cm9rZVwiLCBmdW5jdGlvbihkLCBpKSB7IHJldHVybiBkMy5yZ2IoeihpKSkuZGFya2VyKCk7IH0pO1xuXG4gIHZhciByZWN0ID0gdmFsZ3JvdXAuc2VsZWN0QWxsKFwicmVjdFwiKVxuICAgIC5kYXRhKGZ1bmN0aW9uKGQpe3JldHVybiBkO30pXG4gICAgLmVudGVyKCkuYXBwZW5kKFwic3ZnOnJlY3RcIilcbiAgICAuYXR0cihcInhcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4geChkLngpOyB9KVxuICAgIC5hdHRyKFwieVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiAteShkLnkwKSAtIHkoZC55KTsgfSlcbiAgICAuYXR0cihcImhlaWdodFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiB5KGQueSk7IH0pXG4gICAgLmF0dHIoXCJ3aWR0aFwiLCBNYXRoLm1pbi5hcHBseShudWxsLCBbeC5yYW5nZUJhbmQoKS0yLCAxMDBdKSk7XG59XG5cbmZ1bmN0aW9uIHJhbmRvbVJHQiAoKSB7XG4gIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNTYpO1xufVxuIiwiLy9cbnZhciBpbnB1dF90ZXN0ID0ge1xuXHQvLyAlIG9mIGVsZWN0cmljIGNhcnNcblx0J2VsZWN0cmljX2NhcnMnOiAxXG59XG5cblxuZnVuY3Rpb24gc2hvY2tpbmdVcGRhdGUoaW5wdXRzKSB7XG5cblx0Ly8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblx0Ly8gQmFzZWxpbmUgZGF0YSBcblx0Ly8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuXHQvLyBhbm51YWwgZ2VuZXJhdGlvbiBpbiBHaWdhd2F0dCBIb3Vyc1xuXHR2YXIgZ2VuX3Byb2R1Y3Rpb24gPSB7XG5cdFx0J0h5ZHJvJzogMjQwOTUsXG5cdFx0J0dlb3RoZXJtYWwnOiA2NDg3LFxuXHRcdCdXaW5kJzogMjE4Nyxcblx0XHQnQ29hbCc6IDE4MzIsXG5cdFx0J0dhcyc6IDY2MjZcblx0fVxuXG5cdC8vIGFubnVhbCBnZW5lcmF0aW9uIGVtaXNzaW9ucyBpbiBLaWxvdG9ucyBvZiBDTzIgRXF1aXZhbGVudFxuXHR2YXIgZ2VuX2VtaXNzaW9ucyA9IHtcblx0XHQnSHlkcm8nOiAwLFxuXHRcdCdHZW90aGVybWFsJzogODQ3LjMyLFxuXHRcdCdXaW5kJzogMCxcblx0XHQnQ29hbCc6IDEyMjIuMixcblx0XHQnR2FzJzogMzQwNS41MVxuXHR9XG5cblx0Ly8gYW5udWFsIHZlaGljbGUgZmxlZXQgZW1pc3Npb25zIGluIEtpbG90b25zIG9mIENPMiBFcXVpdmFsZW50XG5cdHZhciBmbGVldF9lbWlzc2lvbnMgPSB7XG5cdFx0J1JvYWQnOiAxMjY4OFxuXHR9XG4gXG5cdC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdC8vIEJ1c2luZXNzIGxvZ2ljXG5cdC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cblx0Ly8gVE9ET1xuXG5cdHZhciByZXN1bHQgPSB7XG5cdFx0J2dlbl9wcm9kdWN0aW9uJzogZ2VuX3Byb2R1Y3Rpb24sXG5cdFx0J2dlbl9lbWlzc2lvbnMnOiBnZW5fZW1pc3Npb25zLFxuXHRcdCdmbGVldF9lbWlzc2lvbnMnOiBmbGVldF9lbWlzc2lvbnNcblx0fVxuXG5cdGNvbnNvbGUubG9nKFwiUmVzdWx0OiBcIiArIEpTT04uc3RyaW5naWZ5KHJlc3VsdCkpO1xuXG5cdHJldHVybiByZXN1bHQ7XG59XG4iLCJmdW5jdGlvbiBtb2NrR1doICgpIHtcbiAgcmV0dXJuIHtcblx0XHQnSHlkcm8nOiAyNDA5NSxcblx0XHQnR2VvdGhlcm1hbCc6IDY0ODcsXG5cdFx0J1dpbmQnOiAyMTg3LFxuXHRcdCdDb2FsJzogMTgzMixcblx0XHQnR2FzJzogNjYyNlxuXHR9O1xufVxuXG5mdW5jdGlvbiBtb2NrQWRqdXN0R1doICgpIHtcbiAgcmV0dXJuIHtcblx0XHQnSHlkcm8nOiAyNDA5NSxcblx0XHQnR2VvdGhlcm1hbCc6IDY0ODcsXG5cdFx0J1dpbmQnOiAyMTg3LFxuXHRcdCdDb2FsJzogMTgzMixcblx0XHQnR2FzJzogNjYyNlxuXHR9O1xufVxuXG5mdW5jdGlvbiBtb2NrR2VuZXJhdGlvbkVtaXNzaW9ucyAoKSB7XG4gIHJldHVybiB7XG5cdFx0J0h5ZHJvJzogMCxcblx0XHQnR2VvdGhlcm1hbCc6IDg0Ny4zMixcblx0XHQnV2luZCc6IDAsXG5cdFx0J0NvYWwnOiAxMjIyLjIsXG5cdFx0J0dhcyc6IDM0MDUuNTFcblx0fTtcbn1cblxuZnVuY3Rpb24gbW9ja0ZsZWV0RW1pc3Npb25zICgpIHtcbiAgcmV0dXJuIHtcblx0XHQnUm9hZCc6IDEyNjg4XG5cdH07XG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=