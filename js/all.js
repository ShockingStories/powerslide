function getRangeValues(){return{carNumber:document.getElementById("carNumber").value,solarNumber:document.getElementById("solarNumber").value,homeNumber:document.getElementById("homeNumber").value,windfarmNumber:document.getElementById("windfarmNumber").value,bicycleNumber:document.getElementById("bicycleNumber").value}}function updateCharts(e,t){document.getElementById(e+"Number").value=t,document.getElementById(e+"Range").value=t;var n=shockingUpdate(getRangeValues());updateGraph("gwh-chart",n.gen_production),updateGraph("co2-chart",{Geothermal:n.gen_emissions.Geothermal,Coal:n.gen_emissions.Coal,Gas:n.gen_emissions.Gas,Road:n.fleet_emissions.Road}),updateGraph("cost-chart",n.gen_cost)}function preprocessData(e,t){var n=[1],r=0;for(var a in e)e.hasOwnProperty(a)&&(r+=e[a],n.push(e[a]));t>0&&n.push(t);for(var o=1;o<n.length;o++)n[o]=Math.round(n[o]/r*100);return n}function updateTotal(e,t){var n=0;for(var r in t)t.hasOwnProperty(r)&&(n+=t[r]);return n=Math.round(n),document.getElementById(e).innerHTML=n,n}function assignColors(e,t){var n=[];switch(e){case"co2":n.push("#ff9900"),n.push("#999999"),n.push("#f3f3f3"),n.push("#34495e");break;case"gwh":n.push("#6d9eeb"),n.push("#ff9900"),n.push("#c9daf8"),n.push("#999999"),n.push("#f3f3f3"),n.push("#ffd966");break;case"cost":n.push("#6d9eeb"),n.push("#ff9900"),n.push("#c9daf8"),n.push("#999999"),n.push("#f3f3f3");break;case"investment":}return t>0&&n.push("none"),n}function updateGraph(e,t){var n=80,r=300,a=e.split("-")[0],o=a+"-total",s=updateTotal(o,t);totals[o]||(totals[o]=parseInt(document.getElementById(o).innerHTML,10));for(var u=totals[o]-s,l=document.getElementById(e);l.firstChild;)l.removeChild(l.firstChild);var d=d3.select("#"+e).append("svg:svg").attr("class","chart").attr("width",n).attr("height",r).append("svg:g").attr("transform","translate(0,"+r+")"),c=[preprocessData(t,u)],i=assignColors(a,u);x=d3.scale.ordinal().rangeRoundBands([0,n]),y=d3.scale.linear().range([0,r]),z=d3.scale.ordinal().range(i);for(var m=[],g=1;g<c[0].length;g++)m.push("c"+g);var p=m.map(function(e,t){return c.map(function(e,n){return{x:n,y:e[t+1]}})}),h=d3.layout.stack()(p);x.domain(h[0].map(function(e){return e.x})),y.domain([0,d3.max(h[h.length-1],function(e){return e.y0+e.y})]);{var f=d.selectAll("g.valgroup").data(h).enter().append("svg:g").attr("class","valgroup").style("fill",function(e,t){return z(t)}).style("stroke",function(e,t){return"none"!==z(t)?d3.rgb(z(t)).darker():"none"});f.selectAll("rect").data(function(e){return e}).enter().append("svg:rect").attr("x",function(e){return x(e.x)}).attr("y",function(e){return-y(e.y0)-y(e.y)}).attr("height",function(e){return y(e.y)}).attr("width",Math.min.apply(null,[x.rangeBand()-2,100]))}}function randomRGB(){return Math.floor(256*Math.random())}function columnGraph(e,t){for(var n=80,r=300,a=d3.select(e).append("svg:svg").attr("class","chart").attr("width",n).attr("height",r).append("svg:g").attr("transform","translate(0,300)"),o=[t],s=[],u=0;u<o[0].length-1;u++)s.push("rgb("+randomRGB()+","+randomRGB()+","+randomRGB()+")");x=d3.scale.ordinal().rangeRoundBands([0,n]),y=d3.scale.linear().range([0,r]),z=d3.scale.ordinal().range(s);var l=["c1","c2","c3","c4","c5"].map(function(e,t){return o.map(function(e,n){return{x:n,y:e[t+1]}})}),d=d3.layout.stack()(l);x.domain(d[0].map(function(e){return e.x})),y.domain([0,d3.max(d[d.length-1],function(e){return e.y0+e.y})]);{var c=a.selectAll("g.valgroup").data(d).enter().append("svg:g").attr("class","valgroup").style("fill",function(e,t){return z(t)}).style("stroke",function(e,t){return d3.rgb(z(t)).darker()});c.selectAll("rect").data(function(e){return e}).enter().append("svg:rect").attr("x",function(e){return x(e.x)}).attr("y",function(e){return-y(e.y0)-y(e.y)}).attr("height",function(e){return y(e.y)}).attr("width",Math.min.apply(null,[x.rangeBand()-2,100]))}}function shockingUpdate(e){var t=getBaseline(),n=t.gen_production,r=t.gen_emissions,a=t.gen_cost,o={},s={Road:12688},u=e.carNumber,l=u/100;s.Road=s.Road*(1-l),ev_power_reqts=2406.4*3341013*l,ev_power_reqts/=1e6;var d=0;for(var c in n)d+=n[c];var i=1+ev_power_reqts/d,m=e.solarNumber,g=5260*m;g/=1e6;var p=g/d;i-=p;for(var c in n)n[c]=n[c]*i;n.Solar=g;for(var c in r)r[c]=r[c]*i;for(var c in r)r[c]=r[c]*i;for(var c in a)a[c]=a[c]*i;var h={gen_production:n,gen_emissions:r,gen_cost:a,gen_capital_cost:o,fleet_emissions:s};return h}function getBaseline(){var e={Hydro:24095,Geothermal:6487,Wind:2187,Coal:1832,Gas:6626,Solar:0},t={Hydro:0,Geothermal:847.32,Wind:0,Coal:1222.2,Gas:3405.51},n={Hydro:53872180,Geothermal:59535e3,Wind:43484e3,Coal:34177200,Gas:161044192},r={gen_production:e,gen_emissions:t,gen_cost:n};return r}function powerOff(){document.body.style.display="none",document.getElementsByTagName("html")[0].style.backgroundColor="black",setTimeout(function(){document.body.style.display="block",document.getElementsByTagName("html")[0].style.backgroundColor="none"},3e3)}var totals={"gwh-total":5e4};document.addEventListener("DOMContentLoaded",function(e){updateCharts("car",0),columnGraph("#investment-chart",[1,5,10,15,45,50])});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNoYXJ0LmpzIiwiZW5naW5lLmpzIiwidWkuanMiXSwibmFtZXMiOlsiZ2V0UmFuZ2VWYWx1ZXMiLCJjYXJOdW1iZXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidmFsdWUiLCJzb2xhck51bWJlciIsImhvbWVOdW1iZXIiLCJ3aW5kZmFybU51bWJlciIsImJpY3ljbGVOdW1iZXIiLCJ1cGRhdGVDaGFydHMiLCJwcmVmaXgiLCJkYXRhIiwic2hvY2tpbmdVcGRhdGUiLCJ1cGRhdGVHcmFwaCIsImdlbl9wcm9kdWN0aW9uIiwiR2VvdGhlcm1hbCIsImdlbl9lbWlzc2lvbnMiLCJDb2FsIiwiR2FzIiwiUm9hZCIsImZsZWV0X2VtaXNzaW9ucyIsImdlbl9jb3N0IiwicHJlcHJvY2Vzc0RhdGEiLCJkZWx0YSIsInZhbHVlcyIsInRvdGFsIiwiayIsImhhc093blByb3BlcnR5IiwicHVzaCIsImkiLCJsZW5ndGgiLCJNYXRoIiwicm91bmQiLCJ1cGRhdGVUb3RhbCIsInRvdGFsSWQiLCJpbm5lckhUTUwiLCJhc3NpZ25Db2xvcnMiLCJjb2xvcnMiLCJiaW5kVG8iLCJ3IiwiaCIsInNwbGl0IiwibmV3VG90YWwiLCJ0b3RhbHMiLCJwYXJzZUludCIsImVsZW1lbnQiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJzdmciLCJkMyIsInNlbGVjdCIsImFwcGVuZCIsImF0dHIiLCJtYXRyaXgiLCJ4Iiwic2NhbGUiLCJvcmRpbmFsIiwicmFuZ2VSb3VuZEJhbmRzIiwieSIsImxpbmVhciIsInJhbmdlIiwieiIsImEiLCJyZW1hcHBlZCIsIm1hcCIsImRhdCIsImQiLCJpaSIsInN0YWNrZWQiLCJsYXlvdXQiLCJzdGFjayIsImRvbWFpbiIsIm1heCIsInkwIiwidmFsZ3JvdXAiLCJzZWxlY3RBbGwiLCJlbnRlciIsInN0eWxlIiwicmdiIiwiZGFya2VyIiwibWluIiwiYXBwbHkiLCJyYW5nZUJhbmQiLCJyYW5kb21SR0IiLCJmbG9vciIsInJhbmRvbSIsImNvbHVtbkdyYXBoIiwiaW5wdXRzIiwiYmFzZWxpbmUiLCJnZXRCYXNlbGluZSIsImdlbl9jYXBpdGFsX2Nvc3QiLCJlbGVjdHJpY19jYXJzIiwiZWxlY3RyaWNfcGN0IiwiZXZfcG93ZXJfcmVxdHMiLCJ0b3RhbF9nZW4iLCJrZXkiLCJpbmNyZWFzZV9pbl9wb3dlcl9yZXF0cyIsInNvbGFyX2hvdXNlcyIsInNvbGFyX3Byb2R1Y3Rpb24iLCJkZWNyZWFzZV9kdWVfdG9fc29sYXIiLCJyZXN1bHQiLCJIeWRybyIsIldpbmQiLCJTb2xhciIsInBvd2VyT2ZmIiwiYm9keSIsImRpc3BsYXkiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImJhY2tncm91bmRDb2xvciIsInNldFRpbWVvdXQiLCJnd2gtdG90YWwiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiXSwibWFwcGluZ3MiOiJBQVlBLFFBQUFBLGtCQUNBLE9BQ0FDLFVBQUFDLFNBQUFDLGVBQUEsYUFBQUMsTUFDQUMsWUFBQUgsU0FBQUMsZUFBQSxlQUFBQyxNQUNBRSxXQUFBSixTQUFBQyxlQUFBLGNBQUFDLE1BQ0FHLGVBQUFMLFNBQUFDLGVBQUEsa0JBQUFDLE1BQ0FJLGNBQUFOLFNBQUFDLGVBQUEsaUJBQUFDLE9BSUEsUUFBQUssY0FBQUMsRUFBQU4sR0FDQUYsU0FBQUMsZUFBQU8sRUFBQSxVQUFBTixNQUFBQSxFQUNBRixTQUFBQyxlQUFBTyxFQUFBLFNBQUFOLE1BQUFBLENBRUEsSUFBQU8sR0FBQUMsZUFBQVosaUJBRUFhLGFBQUEsWUFBQUYsRUFBQUcsZ0JBQ0FELFlBQUEsYUFDQUUsV0FBQUosRUFBQUssY0FBQSxXQUNBQyxLQUFBTixFQUFBSyxjQUFBLEtBQ0FFLElBQUFQLEVBQUFLLGNBQUEsSUFDQUcsS0FBQVIsRUFBQVMsZ0JBQUEsT0FFQVAsWUFBQSxhQUFBRixFQUFBVSxVQ2pDQSxRQUFBQyxnQkFBQVgsRUFBQVksR0FDQSxHQUFBQyxJQUFBLEdBQ0FDLEVBQUEsQ0FDQSxLQUFBLEdBQUFDLEtBQUFmLEdB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QSxFQUdBLE9BQUErRSxHQ25LQSxRQUFBSSxZQUNBdEcsU0FBQXVHLEtBQUE1QixNQUFBNkIsUUFBQSxPQUNBeEcsU0FBQXlHLHFCQUFBLFFBQUEsR0FBQTlCLE1BQUErQixnQkFBQSxRQUNBQyxXQUFBLFdBQ0EzRyxTQUFBdUcsS0FBQTVCLE1BQUE2QixRQUFBLFFBQ0F4RyxTQUFBeUcscUJBQUEsUUFBQSxHQUFBOUIsTUFBQStCLGdCQUFBLFFBQ0EsS0hQQSxHQUFBakUsU0FDQW1FLFlBQUEsSUFHQTVHLFVBQUE2RyxpQkFBQSxtQkFBQSxTQUFBQyxHQUNBdkcsYUFBQSxNQUFBLEdBQ0E2RSxZQUFBLHFCQUNBLEVBQUEsRUFBQSxHQUFBLEdBQUEsR0FBQSIsImZpbGUiOiJqcy9hbGwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgdG90YWxzID0ge1xuICAnZ3doLXRvdGFsJzogNTAwMDAgLy8gU3RhcnQgd2l0aCBoaWdoZXIgdGhhbiBleHBlY3RlZCB2YWx1ZSwgbGVhdmluZyByb29tXG59O1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbihldmVudCkge1xuICB1cGRhdGVDaGFydHMoJ2NhcicsIDApO1xuICBjb2x1bW5HcmFwaChcIiNpbnZlc3RtZW50LWNoYXJ0XCIsIFtcbiAgICAxLCA1LCAxMCwgMTUsIDQ1LCA1MFxuICBdKTtcbn0pO1xuXG4vLyBFYWNoIHNsaWRlcidzIHZhbHVlLCB0byBwYXNzIHRvIGNhbGN1bGF0b3JcbmZ1bmN0aW9uIGdldFJhbmdlVmFsdWVzICgpIHtcbiAgcmV0dXJuIHtcbiAgICAnY2FyTnVtYmVyJzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nhck51bWJlcicpLnZhbHVlLFxuICAgICdzb2xhck51bWJlcic6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb2xhck51bWJlcicpLnZhbHVlLFxuICAgICdob21lTnVtYmVyJzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvbWVOdW1iZXInKS52YWx1ZSxcbiAgICAnd2luZGZhcm1OdW1iZXInOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2luZGZhcm1OdW1iZXInKS52YWx1ZSxcbiAgICAnYmljeWNsZU51bWJlcic6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaWN5Y2xlTnVtYmVyJykudmFsdWVcbiAgfTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlQ2hhcnRzIChwcmVmaXgsIHZhbHVlKSB7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHByZWZpeCArICdOdW1iZXInKS52YWx1ZSA9IHZhbHVlO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwcmVmaXggKyAnUmFuZ2UnKS52YWx1ZSA9IHZhbHVlO1xuXG4gIHZhciBkYXRhID0gc2hvY2tpbmdVcGRhdGUoZ2V0UmFuZ2VWYWx1ZXMoKSk7XG5cbiAgdXBkYXRlR3JhcGgoJ2d3aC1jaGFydCcsIGRhdGEuZ2VuX3Byb2R1Y3Rpb24pO1xuICB1cGRhdGVHcmFwaCgnY28yLWNoYXJ0Jywge1xuICAgICdHZW90aGVybWFsJzogZGF0YS5nZW5fZW1pc3Npb25zWydHZW90aGVybWFsJ10sXG4gICAgJ0NvYWwnOiBkYXRhLmdlbl9lbWlzc2lvbnNbJ0NvYWwnXSxcbiAgICAnR2FzJzogZGF0YS5nZW5fZW1pc3Npb25zWydHYXMnXSxcbiAgICAnUm9hZCc6IGRhdGEuZmxlZXRfZW1pc3Npb25zWydSb2FkJ11cbiAgfSk7XG4gIHVwZGF0ZUdyYXBoKCdjb3N0LWNoYXJ0JywgZGF0YS5nZW5fY29zdCk7XG59XG4iLCIvLyBHZXQgdGhpbmdzIHdvcmtpbmcgZm9yIHByb29mIG9mIGNvbmNlcHQ6XG4vLyBjb252ZXJ0IGRhdGEgb2JqZWN0IHRvIGFycmF5XG5mdW5jdGlvbiBwcmVwcm9jZXNzRGF0YSAoZGF0YSwgZGVsdGEpIHtcbiAgdmFyIHZhbHVlcyA9IFsxXTtcbiAgdmFyIHRvdGFsID0gMDtcbiAgZm9yICh2YXIgayBpbiBkYXRhKSB7XG4gICAgaWYoZGF0YS5oYXNPd25Qcm9wZXJ0eShrKSl7XG4gICAgICB0b3RhbCArPSBkYXRhW2tdO1xuICAgICAgdmFsdWVzLnB1c2goZGF0YVtrXSk7XG4gICAgfVxuICB9XG5cbiAgLy8gZGVsdGEgcmVwcmVzZW50cyBkaWZmZXJlbmNlIGZyb20gb3JpZ2luYWwgdG90YWwgdmFsdWVcbiAgaWYgKGRlbHRhID4gMCkge1xuICAgIHZhbHVlcy5wdXNoKGRlbHRhKTtcbiAgfVxuXG4gIC8vIE5lZWQgcGVyY2VudCB2YWx1ZXMgZm9yIGNoYXJ0XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgdmFsdWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFsdWVzW2ldID0gTWF0aC5yb3VuZCgodmFsdWVzW2ldIC8gdG90YWwpICogMTAwKTtcbiAgfVxuXG4gIHJldHVybiB2YWx1ZXM7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVRvdGFsKHRvdGFsSWQsIGRhdGEpIHtcbiAgdmFyIHRvdGFsID0gMDtcbiAgZm9yICh2YXIgayBpbiBkYXRhKSB7XG4gICAgaWYoZGF0YS5oYXNPd25Qcm9wZXJ0eShrKSl7XG4gICAgICB0b3RhbCArPSBkYXRhW2tdO1xuICAgIH1cbiAgfVxuICB0b3RhbCA9IE1hdGgucm91bmQodG90YWwpO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0b3RhbElkKS5pbm5lckhUTUwgPSB0b3RhbDtcblxuICByZXR1cm4gdG90YWw7XG59XG5cbmZ1bmN0aW9uIGFzc2lnbkNvbG9ycyhwcmVmaXgsIGRlbHRhKSB7XG4gIHZhciBjb2xvcnMgPSBbXTtcblxuICBzd2l0Y2ggKHByZWZpeCkge1xuICAgIGNhc2UgJ2NvMic6XG4gICAgICAvLyBPcmRlciBtYXR0ZXJzLCBzYWRseVxuICAgICAgY29sb3JzLnB1c2goJyNmZjk5MDAnKTsgLy8gR2VvdGhlcm1hbFxuICAgICAgY29sb3JzLnB1c2goJyM5OTk5OTknKTsgLy8gQ29hbFxuICAgICAgY29sb3JzLnB1c2goJyNmM2YzZjMnKTsgLy8gR2FzXG4gICAgICBjb2xvcnMucHVzaCgnIzM0NDk1ZScpOyAvLyBSb2FkXG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ2d3aCc6XG4gICAgICBjb2xvcnMucHVzaCgnIzZkOWVlYicpOyAvLyBIeWRyb1xuICAgICAgY29sb3JzLnB1c2goJyNmZjk5MDAnKTsgLy8gR2VvdGhlcm1hbFxuICAgICAgY29sb3JzLnB1c2goJyNjOWRhZjgnKTsgLy8gV2luZFxuICAgICAgY29sb3JzLnB1c2goJyM5OTk5OTknKTsgLy8gQ29hbFxuICAgICAgY29sb3JzLnB1c2goJyNmM2YzZjMnKTsgLy8gR2FzXG4gICAgICBjb2xvcnMucHVzaCgnI2ZmZDk2NicpOyAvLyBTb2xhclxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdjb3N0JzpcbiAgICAgIGNvbG9ycy5wdXNoKCcjNmQ5ZWViJyk7IC8vIEh5ZHJvXG4gICAgICBjb2xvcnMucHVzaCgnI2ZmOTkwMCcpOyAvLyBHZW90aGVybWFsXG4gICAgICBjb2xvcnMucHVzaCgnI2M5ZGFmOCcpOyAvLyBXaW5kXG4gICAgICBjb2xvcnMucHVzaCgnIzk5OTk5OScpOyAvLyBDb2FsXG4gICAgICBjb2xvcnMucHVzaCgnI2YzZjNmMycpOyAvLyBHYXNcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnaW52ZXN0bWVudCc6XG4gICAgICBicmVhaztcbiAgfVxuXG4gIC8vIFBhZGRpbmcgY29sb3VyXG4gIGlmIChkZWx0YSA+IDApIHtcbiAgICBjb2xvcnMucHVzaCgnbm9uZScpO1xuICB9XG5cbiAgcmV0dXJuIGNvbG9ycztcbn1cblxuZnVuY3Rpb24gdXBkYXRlR3JhcGggKGJpbmRUbywgZGF0YSkge1xuICB2YXIgdyA9IDgwO1xuICB2YXIgaCA9IDMwMDtcblxuICB2YXIgcHJlZml4ID0gYmluZFRvLnNwbGl0KCctJylbMF07XG4gIHZhciB0b3RhbElkID0gcHJlZml4ICsgJy10b3RhbCc7XG4gIHZhciBuZXdUb3RhbCA9IHVwZGF0ZVRvdGFsKHRvdGFsSWQsIGRhdGEpO1xuXG4gIC8vIFN0b3JlIGFzIGdsb2JhbCBmb3IgdGhlIGxpZmUgb2YgdGhlIGRvY3VtZW50XG4gIGlmICghdG90YWxzW3RvdGFsSWRdKSB7XG4gICAgdG90YWxzW3RvdGFsSWRdID0gcGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodG90YWxJZCkuaW5uZXJIVE1MLCAxMCk7XG4gIH1cbiAgdmFyIGRlbHRhID0gdG90YWxzW3RvdGFsSWRdIC0gbmV3VG90YWw7XG5cbiAgLy8gSGFja3k6IHJlbW92ZSBjaGFydCBpZiBpdCBleGlzdHNcbiAgLy8gVE9ETzogdHJhbnNpdGlvbiFcbiAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChiaW5kVG8pO1xuICB3aGlsZSAoZWxlbWVudC5maXJzdENoaWxkKSB7XG4gICAgZWxlbWVudC5yZW1vdmVDaGlsZChlbGVtZW50LmZpcnN0Q2hpbGQpO1xuICB9XG5cbiAgdmFyIHN2ZyA9IGQzLnNlbGVjdCgnIycgKyBiaW5kVG8pLmFwcGVuZChcInN2ZzpzdmdcIilcbiAgICAuYXR0cihcImNsYXNzXCIsIFwiY2hhcnRcIilcbiAgICAuYXR0cihcIndpZHRoXCIsIHcpXG4gICAgLmF0dHIoXCJoZWlnaHRcIiwgaCApXG4gICAgLmFwcGVuZChcInN2ZzpnXCIpXG4gICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCxcIiArIGggKyBcIilcIik7XG5cbiAgLy8gSWYgZGlmZmVyZW5jZSBiZXR3ZWVuIHRvdGFscyBpcyBwb3NpdGl2ZSwgYW4gYWRkaXRpb25hbCBhcnJheSBlbGVtZW50XG4gIC8vIHdpbGwgYmUgYWRkZWQgdG8gcGFkIHRoZSBjaGFydCBhcyB0aGUgdG90YWwgc2hyaW5rc1xuICB2YXIgbWF0cml4ID0gW3ByZXByb2Nlc3NEYXRhKGRhdGEsIGRlbHRhKV07XG4gIHZhciBjb2xvcnMgPSBhc3NpZ25Db2xvcnMocHJlZml4LCBkZWx0YSk7XG5cbiAgeCA9IGQzLnNjYWxlLm9yZGluYWwoKS5yYW5nZVJvdW5kQmFuZHMoWzAsIHddKTtcbiAgeSA9IGQzLnNjYWxlLmxpbmVhcigpLnJhbmdlKFswLCBoXSk7XG4gIHogPSBkMy5zY2FsZS5vcmRpbmFsKCkucmFuZ2UoY29sb3JzKTtcblxuICAvLyBDb3BlIHdpdGggdmFyaWFibGUgbnVtYmVyIG9mIHByb3BlcnRpZXMsIGZvciBub3dcbiAgdmFyIGEgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBtYXRyaXhbMF0ubGVuZ3RoOyBpKyspIHtcbiAgICBhLnB1c2goXCJjXCIgKyBpKTtcbiAgfVxuICAvL3ZhciByZW1hcHBlZCA9IFtcImMxXCIsXCJjMlwiLFwiYzNcIixcImM0XCIsXCJjNVwiXS5tYXAoZnVuY3Rpb24oZGF0LGkpe1xuICB2YXIgcmVtYXBwZWQgPSBhLm1hcChmdW5jdGlvbihkYXQsaSl7XG4gICAgcmV0dXJuIG1hdHJpeC5tYXAoZnVuY3Rpb24oZCxpaSl7XG4gICAgICByZXR1cm4ge3g6IGlpLCB5OiBkW2krMV0gfTtcbiAgICB9KVxuICB9KTtcblxuICB2YXIgc3RhY2tlZCA9IGQzLmxheW91dC5zdGFjaygpKHJlbWFwcGVkKVxuXG4gIHguZG9tYWluKHN0YWNrZWRbMF0ubWFwKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueDsgfSkpO1xuICB5LmRvbWFpbihbMCwgZDMubWF4KHN0YWNrZWRbc3RhY2tlZC5sZW5ndGggLSAxXSwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC55MCArIGQueTsgfSldKTtcblxuICB2YXIgdmFsZ3JvdXAgPSBzdmcuc2VsZWN0QWxsKFwiZy52YWxncm91cFwiKVxuICAgIC5kYXRhKHN0YWNrZWQpXG4gICAgLmVudGVyKCkuYXBwZW5kKFwic3ZnOmdcIilcbiAgICAuYXR0cihcImNsYXNzXCIsIFwidmFsZ3JvdXBcIilcbiAgICAuc3R5bGUoXCJmaWxsXCIsIGZ1bmN0aW9uKGQsIGkpIHsgcmV0dXJuIHooaSk7IH0pXG4gICAgLnN0eWxlKFwic3Ryb2tlXCIsIGZ1bmN0aW9uKGQsIGkpIHsgXG4gICAgICBpZiAoeihpKSAhPT0gJ25vbmUnKSB7XG4gICAgICAgIHJldHVybiBkMy5yZ2IoeihpKSkuZGFya2VyKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gJ25vbmUnO1xuICAgIH0pO1xuXG4gIHZhciByZWN0ID0gdmFsZ3JvdXAuc2VsZWN0QWxsKFwicmVjdFwiKVxuICAgIC5kYXRhKGZ1bmN0aW9uKGQpe3JldHVybiBkO30pXG4gICAgLmVudGVyKCkuYXBwZW5kKFwic3ZnOnJlY3RcIilcbiAgICAuYXR0cihcInhcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4geChkLngpOyB9KVxuICAgIC5hdHRyKFwieVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiAteShkLnkwKSAtIHkoZC55KTsgfSlcbiAgICAuYXR0cihcImhlaWdodFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiB5KGQueSk7IH0pXG4gICAgLmF0dHIoXCJ3aWR0aFwiLCBNYXRoLm1pbi5hcHBseShudWxsLCBbeC5yYW5nZUJhbmQoKS0yLCAxMDBdKSk7XG59XG5cbmZ1bmN0aW9uIHJhbmRvbVJHQiAoKSB7XG4gIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNTYpO1xufVxuXG5mdW5jdGlvbiBjb2x1bW5HcmFwaCAoYmluZFRvLCB2YWx1ZXMpIHtcbiAgdmFyIHcgPSA4MDtcbiAgdmFyIGggPSAzMDA7XG5cbiAgdmFyIHN2ZyA9IGQzLnNlbGVjdChiaW5kVG8pLmFwcGVuZChcInN2ZzpzdmdcIilcbiAgICAuYXR0cihcImNsYXNzXCIsIFwiY2hhcnRcIilcbiAgICAuYXR0cihcIndpZHRoXCIsIHcpXG4gICAgLmF0dHIoXCJoZWlnaHRcIiwgaCApXG4gICAgLmFwcGVuZChcInN2ZzpnXCIpXG4gICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCwzMDApXCIpO1xuXG4gIHZhciBtYXRyaXggPSBbdmFsdWVzXTtcblxuICAvLyBSYW5kb20gZm9yIG5vd1xuICB2YXIgY29sb3JzID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbWF0cml4WzBdLmxlbmd0aCAtMTsgaSsrKSB7XG4gICAgY29sb3JzLnB1c2goJ3JnYignICsgcmFuZG9tUkdCKCkgKyAnLCcgKyByYW5kb21SR0IoKSArICcsJyArIHJhbmRvbVJHQigpICsgJyknKTtcbiAgfVxuXG4gIHggPSBkMy5zY2FsZS5vcmRpbmFsKCkucmFuZ2VSb3VuZEJhbmRzKFswLCB3XSk7XG4gIHkgPSBkMy5zY2FsZS5saW5lYXIoKS5yYW5nZShbMCwgaF0pO1xuICB6ID0gZDMuc2NhbGUub3JkaW5hbCgpLnJhbmdlKGNvbG9ycyk7XG5cbiAgdmFyIHJlbWFwcGVkID1bXCJjMVwiLFwiYzJcIixcImMzXCIsXCJjNFwiLFwiYzVcIl0ubWFwKGZ1bmN0aW9uKGRhdCxpKXtcbiAgICByZXR1cm4gbWF0cml4Lm1hcChmdW5jdGlvbihkLGlpKXtcbiAgICAgIHJldHVybiB7eDogaWksIHk6IGRbaSsxXSB9O1xuICAgIH0pXG4gIH0pO1xuXG4gIHZhciBzdGFja2VkID0gZDMubGF5b3V0LnN0YWNrKCkocmVtYXBwZWQpO1xuXG4gIHguZG9tYWluKHN0YWNrZWRbMF0ubWFwKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueDsgfSkpO1xuICB5LmRvbWFpbihbMCwgZDMubWF4KHN0YWNrZWRbc3RhY2tlZC5sZW5ndGggLSAxXSwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC55MCArIGQueTsgfSldKTtcblxuICB2YXIgdmFsZ3JvdXAgPSBzdmcuc2VsZWN0QWxsKFwiZy52YWxncm91cFwiKVxuICAgIC5kYXRhKHN0YWNrZWQpXG4gICAgLmVudGVyKCkuYXBwZW5kKFwic3ZnOmdcIilcbiAgICAuYXR0cihcImNsYXNzXCIsIFwidmFsZ3JvdXBcIilcbiAgICAuc3R5bGUoXCJmaWxsXCIsIGZ1bmN0aW9uKGQsIGkpIHsgcmV0dXJuIHooaSk7IH0pXG4gICAgLnN0eWxlKFwic3Ryb2tlXCIsIGZ1bmN0aW9uKGQsIGkpIHsgcmV0dXJuIGQzLnJnYih6KGkpKS5kYXJrZXIoKTsgfSk7XG5cbiAgdmFyIHJlY3QgPSB2YWxncm91cC5zZWxlY3RBbGwoXCJyZWN0XCIpXG4gICAgLmRhdGEoZnVuY3Rpb24oZCl7cmV0dXJuIGQ7fSlcbiAgICAuZW50ZXIoKS5hcHBlbmQoXCJzdmc6cmVjdFwiKVxuICAgIC5hdHRyKFwieFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiB4KGQueCk7IH0pXG4gICAgLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIC15KGQueTApIC0geShkLnkpOyB9KVxuICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHkoZC55KTsgfSlcbiAgICAuYXR0cihcIndpZHRoXCIsIE1hdGgubWluLmFwcGx5KG51bGwsIFt4LnJhbmdlQmFuZCgpLTIsIDEwMF0pKTtcbn1cblxuIiwiLy8gcmVmZXJlbmNlOiBodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9zcHJlYWRzaGVldHMvZC8xcmpaWmcxOWdINFNUM1hGZlBhVW12Z0M5MEFDS2dSdzh4LU1nb296a0xmSS9lZGl0I2dpZD0wXG5cblxuZnVuY3Rpb24gc2hvY2tpbmdVcGRhdGUoaW5wdXRzKSB7XG5cblx0dmFyIGJhc2VsaW5lICAgICAgICAgPSBnZXRCYXNlbGluZSgpO1xuXHR2YXIgZ2VuX3Byb2R1Y3Rpb24gICA9IGJhc2VsaW5lWydnZW5fcHJvZHVjdGlvbiddO1xuXHR2YXIgZ2VuX2VtaXNzaW9ucyAgICA9IGJhc2VsaW5lWydnZW5fZW1pc3Npb25zJ107XG5cdHZhciBnZW5fY29zdCAgICAgICAgID0gYmFzZWxpbmVbJ2dlbl9jb3N0J107XG5cdHZhciBnZW5fY2FwaXRhbF9jb3N0ID0ge307XG5cblx0Ly8gYW5udWFsIHZlaGljbGUgZmxlZXQgZW1pc3Npb25zIGluIEtpbG90b25zIG9mIENPMiBFcXVpdmFsZW50XG5cdHZhciBmbGVldF9lbWlzc2lvbnMgPSB7XG5cdFx0J1JvYWQnOiAxMjY4OFxuXHR9XG4gXG5cdC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdC8vIEJ1c2luZXNzIGxvZ2ljXG5cdC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdFxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyBbMV0gRWxlY3RyaWMgY2Fyc1xuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLVxuXG5cdC8vIEFTU1VNUFRJT046IHRoZXJlIGFyZSBlc3NlbnRpYWxseSAwIGVsZWN0cmljIGNhcnMgaW4gdGhlIGN1cnJlbnQgZmxlZXRcblx0dmFyIGVsZWN0cmljX2NhcnMgPSBpbnB1dHNbJ2Nhck51bWJlciddO1xuXHR2YXIgZWxlY3RyaWNfcGN0ID0gZWxlY3RyaWNfY2Fycy8xMDA7XG5cblx0ZmxlZXRfZW1pc3Npb25zWydSb2FkJ10gPSBmbGVldF9lbWlzc2lvbnNbJ1JvYWQnXSAqICgxLWVsZWN0cmljX3BjdCk7XG5cblx0Ly8gQVNTVU1QVElPTjogYW55IHVwdGljayBpbiBwb3dlciBnZW5lcmF0aW9uIHJlcXVpcmVkIHRvIG1lZXRcblx0Ly8gZWxlY3RyaWMgY2FyIGRlbWFuZCwgd2lsbCBiZSBtZXQgcHJvcG9ydGlvbmFsbHkgYnkgYWxsIGdlbmVyYXRpb24gc291cmNlc1xuXHQvLyBBU1NVTVBUSU9OOiB0eXBpY2FsIEVWIHdpbGwgdXNlIDAuMiBrV2ggZm9yIDEga20gdHJhdmVsbGVkXG5cdC8vIGF2ZXJhZ2UgdHJhdmVsIGlzIDEyMDMyIGttIHBlciB5ZWFyXG5cdC8vIGZsZWV0IHNpemUgaXMgMzM0MTAxM1xuXHRldl9wb3dlcl9yZXF0cyA9IDEyMDMyICogMC4yICogMzM0MTAxMyAqIGVsZWN0cmljX3BjdDtcblx0XG5cdC8vIGNvbnZlcnQga3doIHRvIGd3aFxuXHRldl9wb3dlcl9yZXF0cyA9IGV2X3Bvd2VyX3JlcXRzIC8gMTAwMDAwMDtcblxuXHQvLyB3b3JrIG91dCB0b3RhbCBjdXJyZW50IGdlbmVyYXRpb25cblx0dmFyIHRvdGFsX2dlbiA9IDA7XG5cdGZvciAodmFyIGtleSBpbiBnZW5fcHJvZHVjdGlvbikge1xuXHRcdHRvdGFsX2dlbiArPSBnZW5fcHJvZHVjdGlvbltrZXldO1xuXHR9XG5cblx0dmFyIGluY3JlYXNlX2luX3Bvd2VyX3JlcXRzID0gMSArIChldl9wb3dlcl9yZXF0cyAvIHRvdGFsX2dlbik7XG5cblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS1cblx0Ly8gWzJdIFNvbGFyIEhvdXNlc1xuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLVxuXHR2YXIgc29sYXJfaG91c2VzID0gaW5wdXRzWydzb2xhck51bWJlciddO1xuXG5cdC8vIEFTU1VNUFRJT04gLSBlYWNoIGhvdXNlaG9sZCBnZW5lcmF0ZXMgNTI2MCBLV2ggcGVyIHllYXJcblx0dmFyIHNvbGFyX3Byb2R1Y3Rpb24gPSBzb2xhcl9ob3VzZXMgKiA1MjYwO1xuXHQvLyBjb252ZXJ0IHRvIEd3aFxuXHRzb2xhcl9wcm9kdWN0aW9uID0gc29sYXJfcHJvZHVjdGlvbiAvIDEwMDAwMDA7XG5cblx0Ly8gcmVkdWNlIHByb3BvcnRpb25hbGx5IGFsbCB0aGUgb3RoZXIgcHJvZHVjdGlvbiBhbmQgZW1pc3Npb25zXG5cdHZhciBkZWNyZWFzZV9kdWVfdG9fc29sYXIgPSBzb2xhcl9wcm9kdWN0aW9uIC8gdG90YWxfZ2VuO1xuXHRpbmNyZWFzZV9pbl9wb3dlcl9yZXF0cyAtPSBkZWNyZWFzZV9kdWVfdG9fc29sYXI7XG5cblx0Ly8gLS0tLS0tLS0tLVxuXHQvLyBbM10gV2luZFxuXHQvLyAtLS0tLS0tLS0tXG5cdC8vLy92YXIgbmV3X3dpbmQgPSBpbnB1dHNbJ3dpbmROdW1iZXInXTtcblx0XG5cdC8vIEJhc2VkIG9uOiBFYWNoIG5ldyB3aW5kIGZhcm0gaXMgMjAwVzsgNzAyIEdXaCBwZXIgYW5udW07XG5cdC8vIGNhcGl0YWwgY29zdCBvZiAkNTIxLDM0NCw5MThcblx0XG5cdC8vIGZpcnN0IHRoZSBjYXBpdGFsIGNvc3QsIHRoYXQncyBlYXN5OlxuXHQvLy8vZ2VuX2NhcGl0YWxfY29zdFsnV2luZCddID0gbmV3X3dpbmQgKiA1MjEzNDQ5MTg7XG5cblx0Ly8gbmV3IHdpbmQgY2FwYWNpdHlcblx0Ly8vL3ZhciBuZXdfd2luZF9jYXBhY2l0eSA9IG5ld193aW5kICogNzAyO1xuXHQvLyBuZXcgd2luZCBjYXBhY2l0eSBnaXZlcyB1cyBhc3NvY2lhdGVkIHByb2R1Y3Rpb24sIGVtaXNzaW9ucywgYW5kIHJ1bm5pbmcgY29zdHNcblxuXHQvKmlmIChuZXdfd2luZCA+IDApIHtcblx0XHR2YXIgbmV3X3dpbmRfcmF0aW8gPSBuZXdfd2luZF9jYXBhY2l0eSAvIGdlbl9wcm9kdWN0aW9uWydXaW5kJ107XG5cdH1cblxuXHRnZW5fcHJvZHVjdGlvblsnV2luZCddICs9IG5ld193aW5kX2NhcGFjaXR5OyAqL1xuXG5cdC8vIFRPRE86IGZpbmFsbHkgcmVkdWNlIHRoZSBvdGhlciAoaG9wZWZ1bGx5IGxlc3MgcG9sbHV0aW5nKSBnZW5lcmF0aW9uXG5cblxuXHQvLyBhcHBseSB0aGUgZmFjdG9yIHRvIHRoZSBwcm9kdWN0aW9uXG5cdGZvciAodmFyIGtleSBpbiBnZW5fcHJvZHVjdGlvbikge1xuXHRcdGdlbl9wcm9kdWN0aW9uW2tleV0gPSBnZW5fcHJvZHVjdGlvbltrZXldICogaW5jcmVhc2VfaW5fcG93ZXJfcmVxdHM7XG5cdH1cblxuXHQvLyBub3cgYWRkIGluIHRoZSBzb2xhclxuXHRnZW5fcHJvZHVjdGlvblsnU29sYXInXSA9IHNvbGFyX3Byb2R1Y3Rpb247XG5cblx0Zm9yICh2YXIga2V5IGluIGdlbl9lbWlzc2lvbnMpIHtcblx0XHRnZW5fZW1pc3Npb25zW2tleV0gPSBnZW5fZW1pc3Npb25zW2tleV0gKiBpbmNyZWFzZV9pbl9wb3dlcl9yZXF0cztcblx0fVxuXG5cdC8vIG5vdyBhcHBseSB0aGF0IGZhY3RvciB0byB0aGUgZW1pc3Npb25zIC0gZW1pc3Npb25zIGZyb20gRVYgcG93ZXIgcmVxdWlyZW1lbnRzXG5cdGZvciAodmFyIGtleSBpbiBnZW5fZW1pc3Npb25zKSB7XG5cdFx0Z2VuX2VtaXNzaW9uc1trZXldID0gZ2VuX2VtaXNzaW9uc1trZXldICogaW5jcmVhc2VfaW5fcG93ZXJfcmVxdHM7XG5cdH1cblxuXHQvLyBhbHNvIGFwcGx5IHRoZSBzYW1lIGZhY3RvciB0byB0aGUgZ2VuZXJhdGlvbiBjb3N0XG5cdGZvciAodmFyIGtleSBpbiBnZW5fY29zdCkge1xuXHRcdGdlbl9jb3N0W2tleV0gPSBnZW5fY29zdFtrZXldICogaW5jcmVhc2VfaW5fcG93ZXJfcmVxdHM7XG5cdH1cblxuXG5cdC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdC8vIE91dHB1dFxuXHQvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXHR2YXIgcmVzdWx0ID0ge1xuXHRcdCdnZW5fcHJvZHVjdGlvbic6IGdlbl9wcm9kdWN0aW9uLFxuXHRcdCdnZW5fZW1pc3Npb25zJzogZ2VuX2VtaXNzaW9ucyxcblx0XHQnZ2VuX2Nvc3QnOiBnZW5fY29zdCxcblx0XHQnZ2VuX2NhcGl0YWxfY29zdCc6IGdlbl9jYXBpdGFsX2Nvc3QsXG5cdFx0J2ZsZWV0X2VtaXNzaW9ucyc6IGZsZWV0X2VtaXNzaW9uc1xuXHR9XG5cblx0cmV0dXJuIHJlc3VsdDtcbn1cblxuXG5mdW5jdGlvbiBnZXRCYXNlbGluZSgpIHtcblxuXHQvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXHQvLyBCYXNlbGluZSBkYXRhIDogMjAxMy8yMDE0XG5cdC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cblx0Ly8gYW5udWFsIGdlbmVyYXRpb24gaW4gR2lnYXdhdHQgSG91cnNcblx0dmFyIGdlbl9wcm9kdWN0aW9uID0ge1xuXHRcdCdIeWRybyc6IDI0MDk1LFxuXHRcdCdHZW90aGVybWFsJzogNjQ4Nyxcblx0XHQnV2luZCc6IDIxODcsXG5cdFx0J0NvYWwnOiAxODMyLFxuXHRcdCdHYXMnOiA2NjI2LFxuICAgICdTb2xhcic6IDBcblx0fVxuXG5cdC8vIGFubnVhbCBnZW5lcmF0aW9uIGVtaXNzaW9ucyBpbiBLaWxvdG9ucyBvZiBDTzIgRXF1aXZhbGVudFxuXHR2YXIgZ2VuX2VtaXNzaW9ucyA9IHtcblx0XHQnSHlkcm8nOiAwLFxuXHRcdCdHZW90aGVybWFsJzogODQ3LjMyLFxuXHRcdCdXaW5kJzogMCxcblx0XHQnQ29hbCc6IDEyMjIuMixcblx0XHQnR2FzJzogMzQwNS41MVxuXHR9XG5cblx0Ly8gYW5udWFsIGdlbmVyYXRpb24gY29zdHMgaW4gJE5aIHBlciB5ZWFyIChJIHRoaW5rKVxuXHR2YXIgZ2VuX2Nvc3QgPSB7XG5cdFx0J0h5ZHJvJzogNTM4NzIxODAsXG5cdFx0J0dlb3RoZXJtYWwnOiA1OTUzNTAwMCxcblx0XHQnV2luZCc6IDQzNDg0MDAwLFxuXHRcdCdDb2FsJzogMzQxNzcyMDAsXG5cdFx0J0dhcyc6IDE2MTA0NDE5MlxuXHR9XG5cblx0dmFyIHJlc3VsdCA9IHtcblx0XHQnZ2VuX3Byb2R1Y3Rpb24nOiBnZW5fcHJvZHVjdGlvbixcblx0XHQnZ2VuX2VtaXNzaW9ucyc6IGdlbl9lbWlzc2lvbnMsXG5cdFx0J2dlbl9jb3N0JzogZ2VuX2Nvc3QsXG5cdH1cblxuXHRyZXR1cm4gcmVzdWx0O1xufVxuXG5cbiIsIi8vIE5COiB0cmFuc2xhdGVkIHRvIGF2b2lkIHVzaW5nIEpRdWVyeSwgc2luY2Ugd2UgZG9uJ3QgbmVlZCBpdCBmb3IgYW55dGhpbmcgZWxzZVxuZnVuY3Rpb24gcG93ZXJPZmYoKSB7XG4gIGRvY3VtZW50LmJvZHkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2h0bWwnKVswXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnYmxhY2snO1xuICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaHRtbCcpWzBdLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdub25lJztcbiAgfSwgMzAwMCk7XG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=