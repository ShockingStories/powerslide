function getRangeValues(){return{carNumber:document.getElementById("carNumber").value,solarNumber:document.getElementById("solarNumber").value,homeNumber:document.getElementById("homeNumber").value,windfarmNumber:document.getElementById("windfarmNumber").value,bicycleNumber:document.getElementById("bicycleNumber").value}}function updateCharts(e,t){document.getElementById(e+"Number").value=t,document.getElementById(e+"Range").value=t;var n=shockingUpdate(getRangeValues());updateGraph("gwh-chart",n.gen_production),updateGraph("co2-chart",{Geothermal:n.gen_emissions.Geothermal,Coal:n.gen_emissions.Coal,Gas:n.gen_emissions.Gas,Road:n.fleet_emissions.Road}),updateGraph("cost-chart",n.gen_cost)}function preprocessData(e,t){var n=[1],r=0;for(var a in e)e.hasOwnProperty(a)&&(r+=e[a],n.push(e[a]));t>0&&n.push(t);for(var o=1;o<n.length;o++)n[o]=Math.round(n[o]/r*100);return n}function updateTotal(e,t){var n=0;for(var r in t)t.hasOwnProperty(r)&&(n+=t[r]);return n=Math.round(n),document.getElementById(e).innerHTML=n,n}function assignColors(e,t){var n=[];switch(e){case"co2":n.push("#ff9900"),n.push("#999999"),n.push("#f3f3f3"),n.push("#34495e");break;case"gwh":n.push("#6d9eeb"),n.push("#ff9900"),n.push("#c9daf8"),n.push("#999999"),n.push("#f3f3f3"),n.push("#ffd966");break;case"cost":n.push("#6d9eeb"),n.push("#ff9900"),n.push("#c9daf8"),n.push("#999999"),n.push("#f3f3f3");break;case"investment":}return t>0&&n.push("none"),n}function updateGraph(e,t){var n=80,r=300,a=e.split("-")[0],o=a+"-total",s=updateTotal(o,t);totals[o]||(totals[o]=parseInt(document.getElementById(o).innerHTML,10));for(var u=totals[o]-s,l=document.getElementById(e);l.firstChild;)l.removeChild(l.firstChild);var d=d3.select("#"+e).append("svg:svg").attr("class","chart").attr("width",n).attr("height",r).append("svg:g").attr("transform","translate(0,"+r+")"),c=[preprocessData(t,u)],i=assignColors(a,u);x=d3.scale.ordinal().rangeRoundBands([0,n]),y=d3.scale.linear().range([0,r]),z=d3.scale.ordinal().range(i);for(var m=[],g=1;g<c[0].length;g++)m.push("c"+g);var p=m.map(function(e,t){return c.map(function(e,n){return{x:n,y:e[t+1]}})}),f=d3.layout.stack()(p);x.domain(f[0].map(function(e){return e.x})),y.domain([0,d3.max(f[f.length-1],function(e){return e.y0+e.y})]);{var h=d.selectAll("g.valgroup").data(f).enter().append("svg:g").attr("class","valgroup").style("fill",function(e,t){return z(t)}).style("stroke",function(e,t){return"none"!==z(t)?d3.rgb(z(t)).darker():"none"});h.selectAll("rect").data(function(e){return e}).enter().append("svg:rect").attr("x",function(e){return x(e.x)}).attr("y",function(e){return-y(e.y0)-y(e.y)}).attr("height",function(e){return y(e.y)}).attr("width",Math.min.apply(null,[x.rangeBand()-2,100]))}}function randomRGB(){return Math.floor(256*Math.random())}function columnGraph(e,t){for(var n=80,r=300,a=d3.select(e).append("svg:svg").attr("class","chart").attr("width",n).attr("height",r).append("svg:g").attr("transform","translate(0,300)"),o=[t],s=[],u=0;u<o[0].length-1;u++)s.push("rgb("+randomRGB()+","+randomRGB()+","+randomRGB()+")");x=d3.scale.ordinal().rangeRoundBands([0,n]),y=d3.scale.linear().range([0,r]),z=d3.scale.ordinal().range(s);var l=["c1","c2","c3","c4","c5"].map(function(e,t){return o.map(function(e,n){return{x:n,y:e[t+1]}})}),d=d3.layout.stack()(l);x.domain(d[0].map(function(e){return e.x})),y.domain([0,d3.max(d[d.length-1],function(e){return e.y0+e.y})]);{var c=a.selectAll("g.valgroup").data(d).enter().append("svg:g").attr("class","valgroup").style("fill",function(e,t){return z(t)}).style("stroke",function(e,t){return d3.rgb(z(t)).darker()});c.selectAll("rect").data(function(e){return e}).enter().append("svg:rect").attr("x",function(e){return x(e.x)}).attr("y",function(e){return-y(e.y0)-y(e.y)}).attr("height",function(e){return y(e.y)}).attr("width",Math.min.apply(null,[x.rangeBand()-2,100]))}}function shockingUpdate(e){var t=getBaseline(),n=t.gen_production,r=t.gen_emissions,a=t.gen_cost,o={},s={Road:12688},u=e.carNumber,l=u/100;s.Road=s.Road*(1-l),ev_power_reqts=2406.4*3341013*l,ev_power_reqts/=1e6;var d=0;for(var c in n)d+=n[c];var i=1+ev_power_reqts/d,m=e.solarNumber,g=5260*m;g/=1e6;var p=g/d;i-=p;for(var c in n)n[c]=n[c]*i;n.Solar=g;for(var c in r)r[c]=r[c]*i;for(var c in r)r[c]=r[c]*i;for(var c in a)a[c]=a[c]*i;for(var c in a)a[c]=a[c]/1e6;var f={gen_production:n,gen_emissions:r,gen_cost:a,gen_capital_cost:o,fleet_emissions:s};return f}function getBaseline(){var e={Hydro:24095,Geothermal:6487,Wind:2187,Coal:1832,Gas:6626,Solar:0},t={Hydro:0,Geothermal:847.32,Wind:0,Coal:1222.2,Gas:3405.51},n={Hydro:53872180,Geothermal:59535e3,Wind:43484e3,Coal:34177200,Gas:161044192},r={gen_production:e,gen_emissions:t,gen_cost:n};return r}function powerOff(){document.body.style.display="none",document.getElementsByTagName("html")[0].style.backgroundColor="black",setTimeout(function(){document.body.style.display="block",document.getElementsByTagName("html")[0].style.backgroundColor="none"},3e3)}var totals={"gwh-total":5e4,"cost-total":550};document.addEventListener("DOMContentLoaded",function(e){updateCharts("car",0),columnGraph("#investment-chart",[1,5,10,15,45,50])});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNoYXJ0LmpzIiwiZW5naW5lLmpzIiwidWkuanMiXSwibmFtZXMiOlsiZ2V0UmFuZ2VWYWx1ZXMiLCJjYXJOdW1iZXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidmFsdWUiLCJzb2xhck51bWJlciIsImhvbWVOdW1iZXIiLCJ3aW5kZmFybU51bWJlciIsImJpY3ljbGVOdW1iZXIiLCJ1cGRhdGVDaGFydHMiLCJwcmVmaXgiLCJkYXRhIiwic2hvY2tpbmdVcGRhdGUiLCJ1cGRhdGVHcmFwaCIsImdlbl9wcm9kdWN0aW9uIiwiR2VvdGhlcm1hbCIsImdlbl9lbWlzc2lvbnMiLCJDb2FsIiwiR2FzIiwiUm9hZCIsImZsZWV0X2VtaXNzaW9ucyIsImdlbl9jb3N0IiwicHJlcHJvY2Vzc0RhdGEiLCJkZWx0YSIsInZhbHVlcyIsInRvdGFsIiwiayIsImhhc093blByb3BlcnR5IiwicHVzaCIsImkiLCJsZW5ndGgiLCJNYXRoIiwicm91bmQiLCJ1cGRhdGVUb3RhbCIsInRvdGFsSWQiLCJpbm5lckhUTUwiLCJhc3NpZ25Db2xvcnMiLCJjb2xvcnMiLCJiaW5kVG8iLCJ3IiwiaCIsInNwbGl0IiwibmV3VG90YWwiLCJ0b3RhbHMiLCJwYXJzZUludCIsImVsZW1lbnQiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJzdmciLCJkMyIsInNlbGVjdCIsImFwcGVuZCIsImF0dHIiLCJtYXRyaXgiLCJ4Iiwic2NhbGUiLCJvcmRpbmFsIiwicmFuZ2VSb3VuZEJhbmRzIiwieSIsImxpbmVhciIsInJhbmdlIiwieiIsImEiLCJyZW1hcHBlZCIsIm1hcCIsImRhdCIsImQiLCJpaSIsInN0YWNrZWQiLCJsYXlvdXQiLCJzdGFjayIsImRvbWFpbiIsIm1heCIsInkwIiwidmFsZ3JvdXAiLCJzZWxlY3RBbGwiLCJlbnRlciIsInN0eWxlIiwicmdiIiwiZGFya2VyIiwibWluIiwiYXBwbHkiLCJyYW5nZUJhbmQiLCJyYW5kb21SR0IiLCJmbG9vciIsInJhbmRvbSIsImNvbHVtbkdyYXBoIiwiaW5wdXRzIiwiYmFzZWxpbmUiLCJnZXRCYXNlbGluZSIsImdlbl9jYXBpdGFsX2Nvc3QiLCJlbGVjdHJpY19jYXJzIiwiZWxlY3RyaWNfcGN0IiwiZXZfcG93ZXJfcmVxdHMiLCJ0b3RhbF9nZW4iLCJrZXkiLCJpbmNyZWFzZV9pbl9wb3dlcl9yZXF0cyIsInNvbGFyX2hvdXNlcyIsInNvbGFyX3Byb2R1Y3Rpb24iLCJkZWNyZWFzZV9kdWVfdG9fc29sYXIiLCJyZXN1bHQiLCJIeWRybyIsIldpbmQiLCJTb2xhciIsInBvd2VyT2ZmIiwiYm9keSIsImRpc3BsYXkiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImJhY2tncm91bmRDb2xvciIsInNldFRpbWVvdXQiLCJnd2gtdG90YWwiLCJjb3N0LXRvdGFsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50Il0sIm1hcHBpbmdzIjoiQUFhQSxRQUFBQSxrQkFDQSxPQUNBQyxVQUFBQyxTQUFBQyxlQUFBLGFBQUFDLE1BQ0FDLFlBQUFILFNBQUFDLGVBQUEsZUFBQUMsTUFDQUUsV0FBQUosU0FBQUMsZUFBQSxjQUFBQyxNQUNBRyxlQUFBTCxTQUFBQyxlQUFBLGtCQUFBQyxNQUNBSSxjQUFBTixTQUFBQyxlQUFBLGlCQUFBQyxPQUlBLFFBQUFLLGNBQUFDLEVBQUFOLEdBQ0FGLFNBQUFDLGVBQUFPLEVBQUEsVUFBQU4sTUFBQUEsRUFDQUYsU0FBQUMsZUFBQU8sRUFBQSxTQUFBTixNQUFBQSxDQUVBLElBQUFPLEdBQUFDLGVBQUFaLGlCQUVBYSxhQUFBLFlBQUFGLEVBQUFHLGdCQUNBRCxZQUFBLGFBQ0FFLFdBQUFKLEVBQUFLLGNBQUEsV0FDQUMsS0FBQU4sRUFBQUssY0FBQSxLQUNBRSxJQUFBUCxFQUFBSyxjQUFBLElBQ0FHLEtBQUFSLEVBQUFTLGdCQUFBLE9BRUFQLFlBQUEsYUFBQUYsRUFBQVUsVUNsQ0EsUUFBQUMsZ0JBQUFYLEVBQUFZLEdBQ0EsR0FBQUMsSUFBQSxHQUNBQyxFQUFBLENBQ0EsS0FBQSxH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QUEsUUFDQXJGLEtBQUEsU0FDQUMsSUFBQSxXQUdBa0YsR0FDQXRGLGVBQUFBLEVBQ0FFLGNBQUFBLEVBQ0FLLFNBQUFBLEVBR0EsT0FBQStFLEdDN0tBLFFBQUFJLFlBQ0F0RyxTQUFBdUcsS0FBQTVCLE1BQUE2QixRQUFBLE9BQ0F4RyxTQUFBeUcscUJBQUEsUUFBQSxHQUFBOUIsTUFBQStCLGdCQUFBLFFBQ0FDLFdBQUEsV0FDQTNHLFNBQUF1RyxLQUFBNUIsTUFBQTZCLFFBQUEsUUFDQXhHLFNBQUF5RyxxQkFBQSxRQUFBLEdBQUE5QixNQUFBK0IsZ0JBQUEsUUFDQSxLSFBBLEdBQUFqRSxTQUNBbUUsWUFBQSxJQUNBQyxhQUFBLElBR0E3RyxVQUFBOEcsaUJBQUEsbUJBQUEsU0FBQUMsR0FDQXhHLGFBQUEsTUFBQSxHQUNBNkUsWUFBQSxxQkFDQSxFQUFBLEVBQUEsR0FBQSxHQUFBLEdBQUEiLCJmaWxlIjoianMvYWxsLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHRvdGFscyA9IHtcbiAgJ2d3aC10b3RhbCc6IDUwMDAwLCAvLyBTdGFydCB3aXRoIGhpZ2hlciB0aGFuIGV4cGVjdGVkIHZhbHVlLCBsZWF2aW5nIHJvb21cbiAgJ2Nvc3QtdG90YWwnOiA1NTBcbn07XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gIHVwZGF0ZUNoYXJ0cygnY2FyJywgMCk7XG4gIGNvbHVtbkdyYXBoKFwiI2ludmVzdG1lbnQtY2hhcnRcIiwgW1xuICAgIDEsIDUsIDEwLCAxNSwgNDUsIDUwXG4gIF0pO1xufSk7XG5cbi8vIEVhY2ggc2xpZGVyJ3MgdmFsdWUsIHRvIHBhc3MgdG8gY2FsY3VsYXRvclxuZnVuY3Rpb24gZ2V0UmFuZ2VWYWx1ZXMgKCkge1xuICByZXR1cm4ge1xuICAgICdjYXJOdW1iZXInOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FyTnVtYmVyJykudmFsdWUsXG4gICAgJ3NvbGFyTnVtYmVyJzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NvbGFyTnVtYmVyJykudmFsdWUsXG4gICAgJ2hvbWVOdW1iZXInOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaG9tZU51bWJlcicpLnZhbHVlLFxuICAgICd3aW5kZmFybU51bWJlcic6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aW5kZmFybU51bWJlcicpLnZhbHVlLFxuICAgICdiaWN5Y2xlTnVtYmVyJzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpY3ljbGVOdW1iZXInKS52YWx1ZVxuICB9O1xufVxuXG5mdW5jdGlvbiB1cGRhdGVDaGFydHMgKHByZWZpeCwgdmFsdWUpIHtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJlZml4ICsgJ051bWJlcicpLnZhbHVlID0gdmFsdWU7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHByZWZpeCArICdSYW5nZScpLnZhbHVlID0gdmFsdWU7XG5cbiAgdmFyIGRhdGEgPSBzaG9ja2luZ1VwZGF0ZShnZXRSYW5nZVZhbHVlcygpKTtcblxuICB1cGRhdGVHcmFwaCgnZ3doLWNoYXJ0JywgZGF0YS5nZW5fcHJvZHVjdGlvbik7XG4gIHVwZGF0ZUdyYXBoKCdjbzItY2hhcnQnLCB7XG4gICAgJ0dlb3RoZXJtYWwnOiBkYXRhLmdlbl9lbWlzc2lvbnNbJ0dlb3RoZXJtYWwnXSxcbiAgICAnQ29hbCc6IGRhdGEuZ2VuX2VtaXNzaW9uc1snQ29hbCddLFxuICAgICdHYXMnOiBkYXRhLmdlbl9lbWlzc2lvbnNbJ0dhcyddLFxuICAgICdSb2FkJzogZGF0YS5mbGVldF9lbWlzc2lvbnNbJ1JvYWQnXVxuICB9KTtcbiAgdXBkYXRlR3JhcGgoJ2Nvc3QtY2hhcnQnLCBkYXRhLmdlbl9jb3N0KTtcbn1cbiIsIi8vIEdldCB0aGluZ3Mgd29ya2luZyBmb3IgcHJvb2Ygb2YgY29uY2VwdDpcbi8vIGNvbnZlcnQgZGF0YSBvYmplY3QgdG8gYXJyYXlcbmZ1bmN0aW9uIHByZXByb2Nlc3NEYXRhIChkYXRhLCBkZWx0YSkge1xuICB2YXIgdmFsdWVzID0gWzFdO1xuICB2YXIgdG90YWwgPSAwO1xuICBmb3IgKHZhciBrIGluIGRhdGEpIHtcbiAgICBpZihkYXRhLmhhc093blByb3BlcnR5KGspKXtcbiAgICAgIHRvdGFsICs9IGRhdGFba107XG4gICAgICB2YWx1ZXMucHVzaChkYXRhW2tdKTtcbiAgICB9XG4gIH1cblxuICAvLyBkZWx0YSByZXByZXNlbnRzIGRpZmZlcmVuY2UgZnJvbSBvcmlnaW5hbCB0b3RhbCB2YWx1ZVxuICBpZiAoZGVsdGEgPiAwKSB7XG4gICAgdmFsdWVzLnB1c2goZGVsdGEpO1xuICB9XG5cbiAgLy8gTmVlZCBwZXJjZW50IHZhbHVlcyBmb3IgY2hhcnRcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YWx1ZXNbaV0gPSBNYXRoLnJvdW5kKCh2YWx1ZXNbaV0gLyB0b3RhbCkgKiAxMDApO1xuICB9XG5cbiAgcmV0dXJuIHZhbHVlcztcbn1cblxuZnVuY3Rpb24gdXBkYXRlVG90YWwodG90YWxJZCwgZGF0YSkge1xuICB2YXIgdG90YWwgPSAwO1xuICBmb3IgKHZhciBrIGluIGRhdGEpIHtcbiAgICBpZihkYXRhLmhhc093blByb3BlcnR5KGspKXtcbiAgICAgIHRvdGFsICs9IGRhdGFba107XG4gICAgfVxuICB9XG4gIHRvdGFsID0gTWF0aC5yb3VuZCh0b3RhbCk7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRvdGFsSWQpLmlubmVySFRNTCA9IHRvdGFsO1xuXG4gIHJldHVybiB0b3RhbDtcbn1cblxuZnVuY3Rpb24gYXNzaWduQ29sb3JzKHByZWZpeCwgZGVsdGEpIHtcbiAgdmFyIGNvbG9ycyA9IFtdO1xuXG4gIHN3aXRjaCAocHJlZml4KSB7XG4gICAgY2FzZSAnY28yJzpcbiAgICAgIC8vIE9yZGVyIG1hdHRlcnMsIHNhZGx5XG4gICAgICBjb2xvcnMucHVzaCgnI2ZmOTkwMCcpOyAvLyBHZW90aGVybWFsXG4gICAgICBjb2xvcnMucHVzaCgnIzk5OTk5OScpOyAvLyBDb2FsXG4gICAgICBjb2xvcnMucHVzaCgnI2YzZjNmMycpOyAvLyBHYXNcbiAgICAgIGNvbG9ycy5wdXNoKCcjMzQ0OTVlJyk7IC8vIFJvYWRcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnZ3doJzpcbiAgICAgIGNvbG9ycy5wdXNoKCcjNmQ5ZWViJyk7IC8vIEh5ZHJvXG4gICAgICBjb2xvcnMucHVzaCgnI2ZmOTkwMCcpOyAvLyBHZW90aGVybWFsXG4gICAgICBjb2xvcnMucHVzaCgnI2M5ZGFmOCcpOyAvLyBXaW5kXG4gICAgICBjb2xvcnMucHVzaCgnIzk5OTk5OScpOyAvLyBDb2FsXG4gICAgICBjb2xvcnMucHVzaCgnI2YzZjNmMycpOyAvLyBHYXNcbiAgICAgIGNvbG9ycy5wdXNoKCcjZmZkOTY2Jyk7IC8vIFNvbGFyXG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ2Nvc3QnOlxuICAgICAgY29sb3JzLnB1c2goJyM2ZDllZWInKTsgLy8gSHlkcm9cbiAgICAgIGNvbG9ycy5wdXNoKCcjZmY5OTAwJyk7IC8vIEdlb3RoZXJtYWxcbiAgICAgIGNvbG9ycy5wdXNoKCcjYzlkYWY4Jyk7IC8vIFdpbmRcbiAgICAgIGNvbG9ycy5wdXNoKCcjOTk5OTk5Jyk7IC8vIENvYWxcbiAgICAgIGNvbG9ycy5wdXNoKCcjZjNmM2YzJyk7IC8vIEdhc1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdpbnZlc3RtZW50JzpcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgLy8gUGFkZGluZyBjb2xvdXJcbiAgaWYgKGRlbHRhID4gMCkge1xuICAgIGNvbG9ycy5wdXNoKCdub25lJyk7XG4gIH1cblxuICByZXR1cm4gY29sb3JzO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVHcmFwaCAoYmluZFRvLCBkYXRhKSB7XG4gIHZhciB3ID0gODA7XG4gIHZhciBoID0gMzAwO1xuXG4gIHZhciBwcmVmaXggPSBiaW5kVG8uc3BsaXQoJy0nKVswXTtcbiAgdmFyIHRvdGFsSWQgPSBwcmVmaXggKyAnLXRvdGFsJztcbiAgdmFyIG5ld1RvdGFsID0gdXBkYXRlVG90YWwodG90YWxJZCwgZGF0YSk7XG5cbiAgLy8gU3RvcmUgYXMgZ2xvYmFsIGZvciB0aGUgbGlmZSBvZiB0aGUgZG9jdW1lbnRcbiAgaWYgKCF0b3RhbHNbdG90YWxJZF0pIHtcbiAgICB0b3RhbHNbdG90YWxJZF0gPSBwYXJzZUludChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0b3RhbElkKS5pbm5lckhUTUwsIDEwKTtcbiAgfVxuICB2YXIgZGVsdGEgPSB0b3RhbHNbdG90YWxJZF0gLSBuZXdUb3RhbDtcblxuICAvLyBIYWNreTogcmVtb3ZlIGNoYXJ0IGlmIGl0IGV4aXN0c1xuICAvLyBUT0RPOiB0cmFuc2l0aW9uIVxuICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJpbmRUbyk7XG4gIHdoaWxlIChlbGVtZW50LmZpcnN0Q2hpbGQpIHtcbiAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gIH1cblxuICB2YXIgc3ZnID0gZDMuc2VsZWN0KCcjJyArIGJpbmRUbykuYXBwZW5kKFwic3ZnOnN2Z1wiKVxuICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJjaGFydFwiKVxuICAgIC5hdHRyKFwid2lkdGhcIiwgdylcbiAgICAuYXR0cihcImhlaWdodFwiLCBoIClcbiAgICAuYXBwZW5kKFwic3ZnOmdcIilcbiAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgaCArIFwiKVwiKTtcblxuICAvLyBJZiBkaWZmZXJlbmNlIGJldHdlZW4gdG90YWxzIGlzIHBvc2l0aXZlLCBhbiBhZGRpdGlvbmFsIGFycmF5IGVsZW1lbnRcbiAgLy8gd2lsbCBiZSBhZGRlZCB0byBwYWQgdGhlIGNoYXJ0IGFzIHRoZSB0b3RhbCBzaHJpbmtzXG4gIHZhciBtYXRyaXggPSBbcHJlcHJvY2Vzc0RhdGEoZGF0YSwgZGVsdGEpXTtcbiAgdmFyIGNvbG9ycyA9IGFzc2lnbkNvbG9ycyhwcmVmaXgsIGRlbHRhKTtcblxuICB4ID0gZDMuc2NhbGUub3JkaW5hbCgpLnJhbmdlUm91bmRCYW5kcyhbMCwgd10pO1xuICB5ID0gZDMuc2NhbGUubGluZWFyKCkucmFuZ2UoWzAsIGhdKTtcbiAgeiA9IGQzLnNjYWxlLm9yZGluYWwoKS5yYW5nZShjb2xvcnMpO1xuXG4gIC8vIENvcGUgd2l0aCB2YXJpYWJsZSBudW1iZXIgb2YgcHJvcGVydGllcywgZm9yIG5vd1xuICB2YXIgYSA9IFtdO1xuICBmb3IgKHZhciBpID0gMTsgaSA8IG1hdHJpeFswXS5sZW5ndGg7IGkrKykge1xuICAgIGEucHVzaChcImNcIiArIGkpO1xuICB9XG4gIC8vdmFyIHJlbWFwcGVkID0gW1wiYzFcIixcImMyXCIsXCJjM1wiLFwiYzRcIixcImM1XCJdLm1hcChmdW5jdGlvbihkYXQsaSl7XG4gIHZhciByZW1hcHBlZCA9IGEubWFwKGZ1bmN0aW9uKGRhdCxpKXtcbiAgICByZXR1cm4gbWF0cml4Lm1hcChmdW5jdGlvbihkLGlpKXtcbiAgICAgIHJldHVybiB7eDogaWksIHk6IGRbaSsxXSB9O1xuICAgIH0pXG4gIH0pO1xuXG4gIHZhciBzdGFja2VkID0gZDMubGF5b3V0LnN0YWNrKCkocmVtYXBwZWQpXG5cbiAgeC5kb21haW4oc3RhY2tlZFswXS5tYXAoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC54OyB9KSk7XG4gIHkuZG9tYWluKFswLCBkMy5tYXgoc3RhY2tlZFtzdGFja2VkLmxlbmd0aCAtIDFdLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnkwICsgZC55OyB9KV0pO1xuXG4gIHZhciB2YWxncm91cCA9IHN2Zy5zZWxlY3RBbGwoXCJnLnZhbGdyb3VwXCIpXG4gICAgLmRhdGEoc3RhY2tlZClcbiAgICAuZW50ZXIoKS5hcHBlbmQoXCJzdmc6Z1wiKVxuICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJ2YWxncm91cFwiKVxuICAgIC5zdHlsZShcImZpbGxcIiwgZnVuY3Rpb24oZCwgaSkgeyByZXR1cm4geihpKTsgfSlcbiAgICAuc3R5bGUoXCJzdHJva2VcIiwgZnVuY3Rpb24oZCwgaSkgeyBcbiAgICAgIGlmICh6KGkpICE9PSAnbm9uZScpIHtcbiAgICAgICAgcmV0dXJuIGQzLnJnYih6KGkpKS5kYXJrZXIoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAnbm9uZSc7XG4gICAgfSk7XG5cbiAgdmFyIHJlY3QgPSB2YWxncm91cC5zZWxlY3RBbGwoXCJyZWN0XCIpXG4gICAgLmRhdGEoZnVuY3Rpb24oZCl7cmV0dXJuIGQ7fSlcbiAgICAuZW50ZXIoKS5hcHBlbmQoXCJzdmc6cmVjdFwiKVxuICAgIC5hdHRyKFwieFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiB4KGQueCk7IH0pXG4gICAgLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIC15KGQueTApIC0geShkLnkpOyB9KVxuICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHkoZC55KTsgfSlcbiAgICAuYXR0cihcIndpZHRoXCIsIE1hdGgubWluLmFwcGx5KG51bGwsIFt4LnJhbmdlQmFuZCgpLTIsIDEwMF0pKTtcbn1cblxuZnVuY3Rpb24gcmFuZG9tUkdCICgpIHtcbiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1Nik7XG59XG5cbmZ1bmN0aW9uIGNvbHVtbkdyYXBoIChiaW5kVG8sIHZhbHVlcykge1xuICB2YXIgdyA9IDgwO1xuICB2YXIgaCA9IDMwMDtcblxuICB2YXIgc3ZnID0gZDMuc2VsZWN0KGJpbmRUbykuYXBwZW5kKFwic3ZnOnN2Z1wiKVxuICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJjaGFydFwiKVxuICAgIC5hdHRyKFwid2lkdGhcIiwgdylcbiAgICAuYXR0cihcImhlaWdodFwiLCBoIClcbiAgICAuYXBwZW5kKFwic3ZnOmdcIilcbiAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLDMwMClcIik7XG5cbiAgdmFyIG1hdHJpeCA9IFt2YWx1ZXNdO1xuXG4gIC8vIFJhbmRvbSBmb3Igbm93XG4gIHZhciBjb2xvcnMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXRyaXhbMF0ubGVuZ3RoIC0xOyBpKyspIHtcbiAgICBjb2xvcnMucHVzaCgncmdiKCcgKyByYW5kb21SR0IoKSArICcsJyArIHJhbmRvbVJHQigpICsgJywnICsgcmFuZG9tUkdCKCkgKyAnKScpO1xuICB9XG5cbiAgeCA9IGQzLnNjYWxlLm9yZGluYWwoKS5yYW5nZVJvdW5kQmFuZHMoWzAsIHddKTtcbiAgeSA9IGQzLnNjYWxlLmxpbmVhcigpLnJhbmdlKFswLCBoXSk7XG4gIHogPSBkMy5zY2FsZS5vcmRpbmFsKCkucmFuZ2UoY29sb3JzKTtcblxuICB2YXIgcmVtYXBwZWQgPVtcImMxXCIsXCJjMlwiLFwiYzNcIixcImM0XCIsXCJjNVwiXS5tYXAoZnVuY3Rpb24oZGF0LGkpe1xuICAgIHJldHVybiBtYXRyaXgubWFwKGZ1bmN0aW9uKGQsaWkpe1xuICAgICAgcmV0dXJuIHt4OiBpaSwgeTogZFtpKzFdIH07XG4gICAgfSlcbiAgfSk7XG5cbiAgdmFyIHN0YWNrZWQgPSBkMy5sYXlvdXQuc3RhY2soKShyZW1hcHBlZCk7XG5cbiAgeC5kb21haW4oc3RhY2tlZFswXS5tYXAoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC54OyB9KSk7XG4gIHkuZG9tYWluKFswLCBkMy5tYXgoc3RhY2tlZFtzdGFja2VkLmxlbmd0aCAtIDFdLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnkwICsgZC55OyB9KV0pO1xuXG4gIHZhciB2YWxncm91cCA9IHN2Zy5zZWxlY3RBbGwoXCJnLnZhbGdyb3VwXCIpXG4gICAgLmRhdGEoc3RhY2tlZClcbiAgICAuZW50ZXIoKS5hcHBlbmQoXCJzdmc6Z1wiKVxuICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJ2YWxncm91cFwiKVxuICAgIC5zdHlsZShcImZpbGxcIiwgZnVuY3Rpb24oZCwgaSkgeyByZXR1cm4geihpKTsgfSlcbiAgICAuc3R5bGUoXCJzdHJva2VcIiwgZnVuY3Rpb24oZCwgaSkgeyByZXR1cm4gZDMucmdiKHooaSkpLmRhcmtlcigpOyB9KTtcblxuICB2YXIgcmVjdCA9IHZhbGdyb3VwLnNlbGVjdEFsbChcInJlY3RcIilcbiAgICAuZGF0YShmdW5jdGlvbihkKXtyZXR1cm4gZDt9KVxuICAgIC5lbnRlcigpLmFwcGVuZChcInN2ZzpyZWN0XCIpXG4gICAgLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHgoZC54KTsgfSlcbiAgICAuYXR0cihcInlcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gLXkoZC55MCkgLSB5KGQueSk7IH0pXG4gICAgLmF0dHIoXCJoZWlnaHRcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4geShkLnkpOyB9KVxuICAgIC5hdHRyKFwid2lkdGhcIiwgTWF0aC5taW4uYXBwbHkobnVsbCwgW3gucmFuZ2VCYW5kKCktMiwgMTAwXSkpO1xufVxuXG4iLCIvLyByZWZlcmVuY2U6IGh0dHBzOi8vZG9jcy5nb29nbGUuY29tL3NwcmVhZHNoZWV0cy9kLzFyalpaZzE5Z0g0U1QzWEZmUGFVbXZnQzkwQUNLZ1J3OHgtTWdvb3prTGZJL2VkaXQjZ2lkPTBcblxuXG5mdW5jdGlvbiBzaG9ja2luZ1VwZGF0ZShpbnB1dHMpIHtcblxuXHR2YXIgYmFzZWxpbmUgICAgICAgICA9IGdldEJhc2VsaW5lKCk7XG5cdHZhciBnZW5fcHJvZHVjdGlvbiAgID0gYmFzZWxpbmVbJ2dlbl9wcm9kdWN0aW9uJ107XG5cdHZhciBnZW5fZW1pc3Npb25zICAgID0gYmFzZWxpbmVbJ2dlbl9lbWlzc2lvbnMnXTtcblx0dmFyIGdlbl9jb3N0ICAgICAgICAgPSBiYXNlbGluZVsnZ2VuX2Nvc3QnXTtcblx0dmFyIGdlbl9jYXBpdGFsX2Nvc3QgPSB7fTtcblxuXHQvLyBhbm51YWwgdmVoaWNsZSBmbGVldCBlbWlzc2lvbnMgaW4gS2lsb3RvbnMgb2YgQ08yIEVxdWl2YWxlbnRcblx0dmFyIGZsZWV0X2VtaXNzaW9ucyA9IHtcblx0XHQnUm9hZCc6IDEyNjg4XG5cdH1cbiBcblx0Ly8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblx0Ly8gQnVzaW5lc3MgbG9naWNcblx0Ly8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblx0XG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tXG5cdC8vIFsxXSBFbGVjdHJpYyBjYXJzXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tXG5cblx0Ly8gQVNTVU1QVElPTjogdGhlcmUgYXJlIGVzc2VudGlhbGx5IDAgZWxlY3RyaWMgY2FycyBpbiB0aGUgY3VycmVudCBmbGVldFxuXHR2YXIgZWxlY3RyaWNfY2FycyA9IGlucHV0c1snY2FyTnVtYmVyJ107XG5cdHZhciBlbGVjdHJpY19wY3QgPSBlbGVjdHJpY19jYXJzLzEwMDtcblxuXHRmbGVldF9lbWlzc2lvbnNbJ1JvYWQnXSA9IGZsZWV0X2VtaXNzaW9uc1snUm9hZCddICogKDEtZWxlY3RyaWNfcGN0KTtcblxuXHQvLyBBU1NVTVBUSU9OOiBhbnkgdXB0aWNrIGluIHBvd2VyIGdlbmVyYXRpb24gcmVxdWlyZWQgdG8gbWVldFxuXHQvLyBlbGVjdHJpYyBjYXIgZGVtYW5kLCB3aWxsIGJlIG1ldCBwcm9wb3J0aW9uYWxseSBieSBhbGwgZ2VuZXJhdGlvbiBzb3VyY2VzXG5cdC8vIEFTU1VNUFRJT046IHR5cGljYWwgRVYgd2lsbCB1c2UgMC4yIGtXaCBmb3IgMSBrbSB0cmF2ZWxsZWRcblx0Ly8gYXZlcmFnZSB0cmF2ZWwgaXMgMTIwMzIga20gcGVyIHllYXJcblx0Ly8gZmxlZXQgc2l6ZSBpcyAzMzQxMDEzXG5cdGV2X3Bvd2VyX3JlcXRzID0gMTIwMzIgKiAwLjIgKiAzMzQxMDEzICogZWxlY3RyaWNfcGN0O1xuXHRcblx0Ly8gY29udmVydCBrd2ggdG8gZ3doXG5cdGV2X3Bvd2VyX3JlcXRzID0gZXZfcG93ZXJfcmVxdHMgLyAxMDAwMDAwO1xuXG5cdC8vIHdvcmsgb3V0IHRvdGFsIGN1cnJlbnQgZ2VuZXJhdGlvblxuXHR2YXIgdG90YWxfZ2VuID0gMDtcblx0Zm9yICh2YXIga2V5IGluIGdlbl9wcm9kdWN0aW9uKSB7XG5cdFx0dG90YWxfZ2VuICs9IGdlbl9wcm9kdWN0aW9uW2tleV07XG5cdH1cblxuXHR2YXIgaW5jcmVhc2VfaW5fcG93ZXJfcmVxdHMgPSAxICsgKGV2X3Bvd2VyX3JlcXRzIC8gdG90YWxfZ2VuKTtcblxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyBbMl0gU29sYXIgSG91c2VzXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tXG5cdHZhciBzb2xhcl9ob3VzZXMgPSBpbnB1dHNbJ3NvbGFyTnVtYmVyJ107XG5cblx0Ly8gQVNTVU1QVElPTiAtIGVhY2ggaG91c2Vob2xkIGdlbmVyYXRlcyA1MjYwIEtXaCBwZXIgeWVhclxuXHR2YXIgc29sYXJfcHJvZHVjdGlvbiA9IHNvbGFyX2hvdXNlcyAqIDUyNjA7XG5cdC8vIGNvbnZlcnQgdG8gR3doXG5cdHNvbGFyX3Byb2R1Y3Rpb24gPSBzb2xhcl9wcm9kdWN0aW9uIC8gMTAwMDAwMDtcblxuXHQvLyByZWR1Y2UgcHJvcG9ydGlvbmFsbHkgYWxsIHRoZSBvdGhlciBwcm9kdWN0aW9uIGFuZCBlbWlzc2lvbnNcblx0dmFyIGRlY3JlYXNlX2R1ZV90b19zb2xhciA9IHNvbGFyX3Byb2R1Y3Rpb24gLyB0b3RhbF9nZW47XG5cdGluY3JlYXNlX2luX3Bvd2VyX3JlcXRzIC09IGRlY3JlYXNlX2R1ZV90b19zb2xhcjtcblxuXHQvLyAtLS0tLS0tLS0tXG5cdC8vIFszXSBXaW5kXG5cdC8vIC0tLS0tLS0tLS1cblx0Ly8vL3ZhciBuZXdfd2luZCA9IGlucHV0c1snd2luZE51bWJlciddO1xuXHRcblx0Ly8gQmFzZWQgb246IEVhY2ggbmV3IHdpbmQgZmFybSBpcyAyMDBXOyA3MDIgR1doIHBlciBhbm51bTtcblx0Ly8gY2FwaXRhbCBjb3N0IG9mICQ1MjEsMzQ0LDkxOFxuXHRcblx0Ly8gZmlyc3QgdGhlIGNhcGl0YWwgY29zdCwgdGhhdCdzIGVhc3k6XG5cdC8vLy9nZW5fY2FwaXRhbF9jb3N0WydXaW5kJ10gPSBuZXdfd2luZCAqIDUyMTM0NDkxODtcblxuXHQvLyBuZXcgd2luZCBjYXBhY2l0eVxuXHQvLy8vdmFyIG5ld193aW5kX2NhcGFjaXR5ID0gbmV3X3dpbmQgKiA3MDI7XG5cdC8vIG5ldyB3aW5kIGNhcGFjaXR5IGdpdmVzIHVzIGFzc29jaWF0ZWQgcHJvZHVjdGlvbiwgZW1pc3Npb25zLCBhbmQgcnVubmluZyBjb3N0c1xuXG5cdC8qaWYgKG5ld193aW5kID4gMCkge1xuXHRcdHZhciBuZXdfd2luZF9yYXRpbyA9IG5ld193aW5kX2NhcGFjaXR5IC8gZ2VuX3Byb2R1Y3Rpb25bJ1dpbmQnXTtcblx0fVxuXG5cdGdlbl9wcm9kdWN0aW9uWydXaW5kJ10gKz0gbmV3X3dpbmRfY2FwYWNpdHk7ICovXG5cblx0Ly8gVE9ETzogZmluYWxseSByZWR1Y2UgdGhlIG90aGVyIChob3BlZnVsbHkgbGVzcyBwb2xsdXRpbmcpIGdlbmVyYXRpb25cblxuXG5cdC8vIGFwcGx5IHRoZSBmYWN0b3IgdG8gdGhlIHByb2R1Y3Rpb25cblx0Zm9yICh2YXIga2V5IGluIGdlbl9wcm9kdWN0aW9uKSB7XG5cdFx0Z2VuX3Byb2R1Y3Rpb25ba2V5XSA9IGdlbl9wcm9kdWN0aW9uW2tleV0gKiBpbmNyZWFzZV9pbl9wb3dlcl9yZXF0cztcblx0fVxuXG5cdC8vIG5vdyBhZGQgaW4gdGhlIHNvbGFyXG5cdGdlbl9wcm9kdWN0aW9uWydTb2xhciddID0gc29sYXJfcHJvZHVjdGlvbjtcblxuXHRmb3IgKHZhciBrZXkgaW4gZ2VuX2VtaXNzaW9ucykge1xuXHRcdGdlbl9lbWlzc2lvbnNba2V5XSA9IGdlbl9lbWlzc2lvbnNba2V5XSAqIGluY3JlYXNlX2luX3Bvd2VyX3JlcXRzO1xuXHR9XG5cblx0Ly8gbm93IGFwcGx5IHRoYXQgZmFjdG9yIHRvIHRoZSBlbWlzc2lvbnMgLSBlbWlzc2lvbnMgZnJvbSBFViBwb3dlciByZXF1aXJlbWVudHNcblx0Zm9yICh2YXIga2V5IGluIGdlbl9lbWlzc2lvbnMpIHtcblx0XHRnZW5fZW1pc3Npb25zW2tleV0gPSBnZW5fZW1pc3Npb25zW2tleV0gKiBpbmNyZWFzZV9pbl9wb3dlcl9yZXF0cztcblx0fVxuXG5cdC8vIGFsc28gYXBwbHkgdGhlIHNhbWUgZmFjdG9yIHRvIHRoZSBnZW5lcmF0aW9uIGNvc3Rcblx0Zm9yICh2YXIga2V5IGluIGdlbl9jb3N0KSB7XG5cdFx0Z2VuX2Nvc3Rba2V5XSA9IGdlbl9jb3N0W2tleV0gKiBpbmNyZWFzZV9pbl9wb3dlcl9yZXF0cztcblx0fVxuXG5cdC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdC8vIERhdGEgdGlkeWluZ1xuXHQvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXHRcblx0Ly8gY29udmVydCBjb3N0IGZyb20gZG9sbGFycyB0byBtaWxsaW9uc1xuXHRmb3IgKHZhciBrZXkgaW4gZ2VuX2Nvc3QpIHtcblx0XHRnZW5fY29zdFtrZXldID0gZ2VuX2Nvc3Rba2V5XSAvIDEwMDAwMDA7XG5cdH1cblxuXHQvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXHQvLyBPdXRwdXRcblx0Ly8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblx0dmFyIHJlc3VsdCA9IHtcblx0XHQnZ2VuX3Byb2R1Y3Rpb24nOiBnZW5fcHJvZHVjdGlvbixcblx0XHQnZ2VuX2VtaXNzaW9ucyc6IGdlbl9lbWlzc2lvbnMsXG5cdFx0J2dlbl9jb3N0JzogZ2VuX2Nvc3QsXG5cdFx0J2dlbl9jYXBpdGFsX2Nvc3QnOiBnZW5fY2FwaXRhbF9jb3N0LFxuXHRcdCdmbGVldF9lbWlzc2lvbnMnOiBmbGVldF9lbWlzc2lvbnNcblx0fVxuXG5cblxuXHRyZXR1cm4gcmVzdWx0O1xufVxuXG5cbmZ1bmN0aW9uIGdldEJhc2VsaW5lKCkge1xuXG5cdC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdC8vIEJhc2VsaW5lIGRhdGEgOiAyMDEzLzIwMTRcblx0Ly8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuXHQvLyBhbm51YWwgZ2VuZXJhdGlvbiBpbiBHaWdhd2F0dCBIb3Vyc1xuXHR2YXIgZ2VuX3Byb2R1Y3Rpb24gPSB7XG5cdFx0J0h5ZHJvJzogMjQwOTUsXG5cdFx0J0dlb3RoZXJtYWwnOiA2NDg3LFxuXHRcdCdXaW5kJzogMjE4Nyxcblx0XHQnQ29hbCc6IDE4MzIsXG5cdFx0J0dhcyc6IDY2MjYsXG4gICAgJ1NvbGFyJzogMFxuXHR9XG5cblx0Ly8gYW5udWFsIGdlbmVyYXRpb24gZW1pc3Npb25zIGluIEtpbG90b25zIG9mIENPMiBFcXVpdmFsZW50XG5cdHZhciBnZW5fZW1pc3Npb25zID0ge1xuXHRcdCdIeWRybyc6IDAsXG5cdFx0J0dlb3RoZXJtYWwnOiA4NDcuMzIsXG5cdFx0J1dpbmQnOiAwLFxuXHRcdCdDb2FsJzogMTIyMi4yLFxuXHRcdCdHYXMnOiAzNDA1LjUxXG5cdH1cblxuXHQvLyBhbm51YWwgZ2VuZXJhdGlvbiBjb3N0cyBpbiAkTlogcGVyIHllYXIgKEkgdGhpbmspXG5cdHZhciBnZW5fY29zdCA9IHtcblx0XHQnSHlkcm8nOiA1Mzg3MjE4MCxcblx0XHQnR2VvdGhlcm1hbCc6IDU5NTM1MDAwLFxuXHRcdCdXaW5kJzogNDM0ODQwMDAsXG5cdFx0J0NvYWwnOiAzNDE3NzIwMCxcblx0XHQnR2FzJzogMTYxMDQ0MTkyXG5cdH1cblxuXHR2YXIgcmVzdWx0ID0ge1xuXHRcdCdnZW5fcHJvZHVjdGlvbic6IGdlbl9wcm9kdWN0aW9uLFxuXHRcdCdnZW5fZW1pc3Npb25zJzogZ2VuX2VtaXNzaW9ucyxcblx0XHQnZ2VuX2Nvc3QnOiBnZW5fY29zdCxcblx0fVxuXG5cdHJldHVybiByZXN1bHQ7XG59XG5cblxuIiwiLy8gTkI6IHRyYW5zbGF0ZWQgdG8gYXZvaWQgdXNpbmcgSlF1ZXJ5LCBzaW5jZSB3ZSBkb24ndCBuZWVkIGl0IGZvciBhbnl0aGluZyBlbHNlXG5mdW5jdGlvbiBwb3dlck9mZigpIHtcbiAgZG9jdW1lbnQuYm9keS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaHRtbCcpWzBdLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdibGFjayc7XG4gIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdodG1sJylbMF0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ25vbmUnO1xuICB9LCAzMDAwKTtcbn1cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==