function getRangeValues(){return{carNumber:document.getElementById("carNumber").value,solarNumber:document.getElementById("solarNumber").value,homeNumber:document.getElementById("homeNumber").value,windfarmNumber:document.getElementById("windfarmNumber").value,bicycleNumber:document.getElementById("bicycleNumber").value}}function updateCars(e){document.getElementById("carNumber").value=e,document.getElementById("carRange").value=e;var t=shockingUpdate(getRangeValues());updateGraph("gwh-chart",t.gen_production),updateGraph("co2-chart",{Geothermal:t.gen_emissions.Geothermal,Coal:t.gen_emissions.Coal,Gas:t.gen_emissions.Gas,Road:t.fleet_emissions.Road})}function preprocessData(e,t){var n=[1],r=0;for(var a in e)e.hasOwnProperty(a)&&(r+=e[a],n.push(e[a]));t>0&&n.push(t);for(var o=1;o<n.length;o++)n[o]=Math.round(n[o]/r*100);return n}function updateTotal(e,t){var n=0;for(var r in t)t.hasOwnProperty(r)&&(n+=t[r]);return n=Math.round(n),document.getElementById(e).innerHTML=n,n}function updateGraph(e,t){var n=80,r=300,a=e.split("-")[0]+"-total",o=updateTotal(a,t);totals[a]||(totals[a]=parseInt(document.getElementById(a).innerHTML,10));for(var u=totals[a]-o,l=document.getElementById(e);l.firstChild;)l.removeChild(l.firstChild);for(var s=d3.select("#"+e).append("svg:svg").attr("class","chart").attr("width",n).attr("height",r).append("svg:g").attr("transform","translate(0,"+r+")"),d=[preprocessData(t,u)],c=[],i=0;i<d[0].length-1;i++)c.push("rgb("+randomRGB()+","+randomRGB()+","+randomRGB()+")");u>0&&(c[d[0].length-1]="rgb(255,255,255)"),x=d3.scale.ordinal().rangeRoundBands([0,n]),y=d3.scale.linear().range([0,r]),z=d3.scale.ordinal().range(c);for(var m=[],i=1;i<d[0].length;i++)m.push("c"+i);var g=m.map(function(e,t){return d.map(function(e,n){return{x:n,y:e[t+1]}})}),p=d3.layout.stack()(g);x.domain(p[0].map(function(e){return e.x})),y.domain([0,d3.max(p[p.length-1],function(e){return e.y0+e.y})]);{var h=s.selectAll("g.valgroup").data(p).enter().append("svg:g").attr("class","valgroup").style("fill",function(e,t){return z(t)}).style("stroke",function(e,t){return d3.rgb(z(t)).darker()});h.selectAll("rect").data(function(e){return e}).enter().append("svg:rect").attr("x",function(e){return x(e.x)}).attr("y",function(e){return-y(e.y0)-y(e.y)}).attr("height",function(e){return y(e.y)}).attr("width",Math.min.apply(null,[x.rangeBand()-2,100]))}}function randomRGB(){return Math.floor(256*Math.random())}function columnGraph(e,t){for(var n=80,r=300,a=d3.select(e).append("svg:svg").attr("class","chart").attr("width",n).attr("height",r).append("svg:g").attr("transform","translate(0,300)"),o=[t],u=[],l=0;l<o[0].length-1;l++)u.push("rgb("+randomRGB()+","+randomRGB()+","+randomRGB()+")");x=d3.scale.ordinal().rangeRoundBands([0,n]),y=d3.scale.linear().range([0,r]),z=d3.scale.ordinal().range(u);var s=["c1","c2","c3","c4","c5"].map(function(e,t){return o.map(function(e,n){return{x:n,y:e[t+1]}})}),d=d3.layout.stack()(s);x.domain(d[0].map(function(e){return e.x})),y.domain([0,d3.max(d[d.length-1],function(e){return e.y0+e.y})]);{var c=a.selectAll("g.valgroup").data(d).enter().append("svg:g").attr("class","valgroup").style("fill",function(e,t){return z(t)}).style("stroke",function(e,t){return d3.rgb(z(t)).darker()});c.selectAll("rect").data(function(e){return e}).enter().append("svg:rect").attr("x",function(e){return x(e.x)}).attr("y",function(e){return-y(e.y0)-y(e.y)}).attr("height",function(e){return y(e.y)}).attr("width",Math.min.apply(null,[x.rangeBand()-2,100]))}}function shockingUpdate(e){var t=getBaseline(),n=t.gen_production,r=t.gen_emissions,a=t.gen_cost,o={},u={Road:12688},l=e.carNumber,s=l/100;u.Road=u.Road*(1-s),ev_power_reqts=2406.4*3341013*s,ev_power_reqts/=1e6;var d=0;for(var c in n)d+=n[c];var i=1+ev_power_reqts/d,m=e.solarNumber,g=5260*m;g/=1e6;var p=g/d;i-=p;for(var c in n)n[c]=n[c]*i;n.Solar=g;for(var c in r)r[c]=r[c]*i;for(var c in r)r[c]=r[c]*i;for(var c in a)a[c]=a[c]*i;var h={gen_production:n,gen_emissions:r,gen_cost:a,gen_capital_cost:o,fleet_emissions:u};return h}function getBaseline(){var e={Hydro:24095,Geothermal:6487,Wind:2187,Coal:1832,Gas:6626},t={Hydro:0,Geothermal:847.32,Wind:0,Coal:1222.2,Gas:3405.51},n={Hydro:53872180,Geothermal:59535e3,Wind:43484e3,Coal:34177200,Gas:161044192},r={gen_production:e,gen_emissions:t,gen_cost:n};return r}function powerOff(){document.body.style.display="none",document.getElementsByTagName("html")[0].style.backgroundColor="black",setTimeout(function(){document.body.style.display="block",document.getElementsByTagName("html")[0].style.backgroundColor="none"},3e3)}var totals={};document.addEventListener("DOMContentLoaded",function(e){updateCars(0),columnGraph("#cost-chart",[1,10,15,15,35,50]),columnGraph("#investment-chart",[1,5,10,15,45,50])});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNoYXJ0LmpzIiwiZW5naW5lLmpzIiwidWkuanMiXSwibmFtZXMiOlsiZ2V0UmFuZ2VWYWx1ZXMiLCJjYXJOdW1iZXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidmFsdWUiLCJzb2xhck51bWJlciIsImhvbWVOdW1iZXIiLCJ3aW5kZmFybU51bWJlciIsImJpY3ljbGVOdW1iZXIiLCJ1cGRhdGVDYXJzIiwiZGF0YSIsInNob2NraW5nVXBkYXRlIiwidXBkYXRlR3JhcGgiLCJnZW5fcHJvZHVjdGlvbiIsIkdlb3RoZXJtYWwiLCJnZW5fZW1pc3Npb25zIiwiQ29hbCIsIkdhcyIsIlJvYWQiLCJmbGVldF9lbWlzc2lvbnMiLCJwcmVwcm9jZXNzRGF0YSIsImRlbHRhIiwidmFsdWVzIiwidG90YWwiLCJrIiwiaGFzT3duUHJvcGVydHkiLCJwdXNoIiwiaSIsImxlbmd0aCIsIk1hdGgiLCJyb3VuZCIsInVwZGF0ZVRvdGFsIiwidG90YWxJZCIsImlubmVySFRNTCIsImJpbmRUbyIsInciLCJoIiwic3BsaXQiLCJuZXdUb3RhbCIsInRvdGFscyIsInBhcnNlSW50IiwiZWxlbWVudCIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsInN2ZyIsImQzIiwic2VsZWN0IiwiYXBwZW5kIiwiYXR0ciIsIm1hdHJpeCIsImNvbG9ycyIsInJhbmRvbVJHQiIsIngiLCJzY2FsZSIsIm9yZGluYWwiLCJyYW5nZVJvdW5kQmFuZHMiLCJ5IiwibGluZWFyIiwicmFuZ2UiLCJ6IiwiYSIsInJlbWFwcGVkIiwibWFwIiwiZGF0IiwiZCIsImlpIiwic3RhY2tlZCIsImxheW91dCIsInN0YWNrIiwiZG9tYWluIiwibWF4IiwieTAiLCJ2YWxncm91cCIsInNlbGVjdEFsbCIsImVudGVyIiwic3R5bGUiLCJyZ2IiLCJkYXJrZXIiLCJtaW4iLCJhcHBseSIsInJhbmdlQmFuZCIsImZsb29yIiwicmFuZG9tIiwiY29sdW1uR3JhcGgiLCJpbnB1dHMiLCJiYXNlbGluZSIsImdldEJhc2VsaW5lIiwiZ2VuX2Nvc3QiLCJnZW5fY2FwaXRhbF9jb3N0IiwiZWxlY3RyaWNfY2FycyIsImVsZWN0cmljX3BjdCIsImV2X3Bvd2VyX3JlcXRzIiwidG90YWxfZ2VuIiwia2V5IiwiaW5jcmVhc2VfaW5fcG93ZXJfcmVxdHMiLCJzb2xhcl9ob3VzZXMiLCJzb2xhcl9wcm9kdWN0aW9uIiwiZGVjcmVhc2VfZHVlX3RvX3NvbGFyIiwicmVzdWx0IiwiSHlkcm8iLCJXaW5kIiwicG93ZXJPZmYiLCJib2R5IiwiZGlzcGxheSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiYmFja2dyb3VuZENvbG9yIiwic2V0VGltZW91dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCJdLCJtYXBwaW5ncyI6IkFBYUEsUUFBQUEsa0JBQ0EsT0FDQUMsVUFBQUMsU0FBQUMsZUFBQSxhQUFBQyxNQUNBQyxZQUFBSCxTQUFBQyxlQUFBLGVBQUFDLE1BQ0FFLFdBQUFKLFNBQUFDLGVBQUEsY0FBQUMsTUFDQUcsZUFBQUwsU0FBQUMsZUFBQSxrQkFBQUMsTUFDQUksY0FBQU4sU0FBQUMsZUFBQSxpQkFBQUMsT0FJQSxRQUFBSyxZQUFBTCxHQUNBRixTQUFBQyxlQUFBLGFBQUFDLE1BQUFBLEVBQ0FGLFNBQUFDLGVBQUEsWUFBQUMsTUFBQUEsQ0FFQSxJQUFBTSxHQUFBQyxlQUFBWCxpQkFFQVksYUFBQSxZQUFBRixFQUFBRyxnQkFDQUQsWUFBQSxhQUNBRSxXQUFBSixFQUFBSyxjQUFBLFdBQ0FDLEtBQUFOLEVBQUFLLGNBQUEsS0FDQUUsSUFBQVAsRUFBQUssY0FBQSxJQUNBRyxLQUFBUixFQUFBUyxnQkFBQSxPQ2xDQSxRQUFBQyxnQkFBQVYsRUFBQVcsR0FFQSxHQUFBQyxJQUFBLEdBQ0FDLEVBQUEsQ0FDQSxLQUFBLEdBQUFDLEtBQUFkLEdBQ0FBLEVBQUFlLGVBQUFELEtBQ0FELEdBQUFiLEVBQUFjLEdBQ0FGLEVBQUFJLEtBQUFoQixFQUFBYyxJQUtBSCxHQUFBLEdBQ0FDLEVBQUFJLEtBQUFM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bnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgdXBkYXRlQ2FycygwKTtcbiAgY29sdW1uR3JhcGgoXCIjY29zdC1jaGFydFwiLCBbXG4gICAgMSwgMTAsIDE1LCAxNSwgMzUsIDUwXG4gIF0pO1xuICBjb2x1bW5HcmFwaChcIiNpbnZlc3RtZW50LWNoYXJ0XCIsIFtcbiAgICAxLCA1LCAxMCwgMTUsIDQ1LCA1MFxuICBdKTtcbn0pO1xuXG4vLyBFYWNoIHNsaWRlcidzIHZhbHVlLCB0byBwYXNzIHRvIGNhbGN1bGF0b3JcbmZ1bmN0aW9uIGdldFJhbmdlVmFsdWVzICgpIHtcbiAgcmV0dXJuIHtcbiAgICAnY2FyTnVtYmVyJzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nhck51bWJlcicpLnZhbHVlLFxuICAgICdzb2xhck51bWJlcic6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb2xhck51bWJlcicpLnZhbHVlLFxuICAgICdob21lTnVtYmVyJzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvbWVOdW1iZXInKS52YWx1ZSxcbiAgICAnd2luZGZhcm1OdW1iZXInOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2luZGZhcm1OdW1iZXInKS52YWx1ZSxcbiAgICAnYmljeWNsZU51bWJlcic6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaWN5Y2xlTnVtYmVyJykudmFsdWVcbiAgfTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlQ2FycyAodmFsdWUpIHtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nhck51bWJlcicpLnZhbHVlID0gdmFsdWU7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXJSYW5nZScpLnZhbHVlID0gdmFsdWU7XG5cbiAgdmFyIGRhdGEgPSBzaG9ja2luZ1VwZGF0ZShnZXRSYW5nZVZhbHVlcygpKTtcblxuICB1cGRhdGVHcmFwaCgnZ3doLWNoYXJ0JywgZGF0YS5nZW5fcHJvZHVjdGlvbik7XG4gIHVwZGF0ZUdyYXBoKCdjbzItY2hhcnQnLCB7XG4gICAgJ0dlb3RoZXJtYWwnOiBkYXRhLmdlbl9lbWlzc2lvbnNbJ0dlb3RoZXJtYWwnXSxcbiAgICAnQ29hbCc6IGRhdGEuZ2VuX2VtaXNzaW9uc1snQ29hbCddLFxuICAgICdHYXMnOiBkYXRhLmdlbl9lbWlzc2lvbnNbJ0dhcyddLFxuICAgICdSb2FkJzogZGF0YS5mbGVldF9lbWlzc2lvbnNbJ1JvYWQnXVxuICB9KTtcbn1cbiIsImZ1bmN0aW9uIHByZXByb2Nlc3NEYXRhIChkYXRhLCBkZWx0YSkge1xuICAvLyBIb3JyaWJsZSBrbHVkZ2UgdG8gZ2V0IHRoaW5ncyB3b3JraW5nIGZvciBwcm9vZiBvZiBjb25jZXB0Li4uXG4gIHZhciB2YWx1ZXMgPSBbMV07XG4gIHZhciB0b3RhbCA9IDA7XG4gIGZvciAodmFyIGsgaW4gZGF0YSkge1xuICAgIGlmKGRhdGEuaGFzT3duUHJvcGVydHkoaykpe1xuICAgICAgdG90YWwgKz0gZGF0YVtrXTtcbiAgICAgIHZhbHVlcy5wdXNoKGRhdGFba10pO1xuICAgIH1cbiAgfVxuXG4gIC8vIGRlbHRhIHJlcHJlc2VudHMgZGlmZmVyZW5jZSBmcm9tIG9yaWdpbmFsIHRvdGFsIHZhbHVlXG4gIGlmIChkZWx0YSA+IDApIHtcbiAgICB2YWx1ZXMucHVzaChkZWx0YSk7XG4gIH1cblxuICAvLyBOZWVkIHBlcmNlbnQgdmFsdWVzIGZvciBjaGFydFxuICBmb3IgKHZhciBpID0gMTsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykge1xuICAgIHZhbHVlc1tpXSA9IE1hdGgucm91bmQoKHZhbHVlc1tpXSAvIHRvdGFsKSAqIDEwMCk7XG4gIH1cblxuICByZXR1cm4gdmFsdWVzO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVUb3RhbCh0b3RhbElkLCBkYXRhKSB7XG4gIHZhciB0b3RhbCA9IDA7XG4gIGZvciAodmFyIGsgaW4gZGF0YSkge1xuICAgIGlmKGRhdGEuaGFzT3duUHJvcGVydHkoaykpe1xuICAgICAgdG90YWwgKz0gZGF0YVtrXTtcbiAgICB9XG4gIH1cbiAgdG90YWwgPSBNYXRoLnJvdW5kKHRvdGFsKTtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodG90YWxJZCkuaW5uZXJIVE1MID0gdG90YWw7XG5cbiAgcmV0dXJuIHRvdGFsO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVHcmFwaCAoYmluZFRvLCBkYXRhKSB7XG4gIHZhciB3ID0gODA7XG4gIHZhciBoID0gMzAwO1xuXG4gIHZhciB0b3RhbElkID0gYmluZFRvLnNwbGl0KCctJylbMF0gKyAnLXRvdGFsJztcbiAgdmFyIG5ld1RvdGFsID0gdXBkYXRlVG90YWwodG90YWxJZCwgZGF0YSk7XG5cbiAgLy8gU3RvcmUgYXMgZ2xvYmFsIGZvciB0aGUgbGlmZSBvZiB0aGUgZG9jdW1lbnRcbiAgaWYgKCF0b3RhbHNbdG90YWxJZF0pIHtcbiAgICB0b3RhbHNbdG90YWxJZF0gPSBwYXJzZUludChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0b3RhbElkKS5pbm5lckhUTUwsIDEwKTtcbiAgfVxuICB2YXIgZGVsdGEgPSB0b3RhbHNbdG90YWxJZF0gLSBuZXdUb3RhbDtcblxuICAvLyBIYWNreTogcmVtb3ZlIGNoYXJ0IGlmIGl0IGV4aXN0c1xuICAvLyBUT0RPOiB0cmFuc2l0aW9uIVxuICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJpbmRUbyk7XG4gIHdoaWxlIChlbGVtZW50LmZpcnN0Q2hpbGQpIHtcbiAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gIH1cblxuICB2YXIgc3ZnID0gZDMuc2VsZWN0KCcjJyArIGJpbmRUbykuYXBwZW5kKFwic3ZnOnN2Z1wiKVxuICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJjaGFydFwiKVxuICAgIC5hdHRyKFwid2lkdGhcIiwgdylcbiAgICAuYXR0cihcImhlaWdodFwiLCBoIClcbiAgICAuYXBwZW5kKFwic3ZnOmdcIilcbiAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgaCArIFwiKVwiKTtcblxuICAvLyBJZiBkaWZmZXJlbmNlIGJldHdlZW4gdG90YWxzIGlzIHBvc2l0aXZlLCBhbiBhZGRpdGlvbmFsIGFycmF5IGVsZW1lbnRcbiAgLy8gd2lsbCBiZSBhZGRlZCB0byBwYWQgdGhlIGNoYXJ0IGFzIHRoZSB0b3RhbCBzaHJpbmtzXG4gIHZhciBtYXRyaXggPSBbcHJlcHJvY2Vzc0RhdGEoZGF0YSwgZGVsdGEpXTtcblxuICAvLyBSYW5kb20gZm9yIG5vd1xuICB2YXIgY29sb3JzID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbWF0cml4WzBdLmxlbmd0aCAtMTsgaSsrKSB7XG4gICAgY29sb3JzLnB1c2goJ3JnYignICsgcmFuZG9tUkdCKCkgKyAnLCcgKyByYW5kb21SR0IoKSArICcsJyArIHJhbmRvbVJHQigpICsgJyknKTtcbiAgfVxuXG4gIC8vIFBhZGRpbmcgY29sb3VyXG4gIGlmIChkZWx0YSA+IDApIHtcbiAgICBjb2xvcnNbbWF0cml4WzBdLmxlbmd0aC0xXSA9ICdyZ2IoMjU1LDI1NSwyNTUpJztcbiAgfVxuXG4gIHggPSBkMy5zY2FsZS5vcmRpbmFsKCkucmFuZ2VSb3VuZEJhbmRzKFswLCB3XSk7XG4gIHkgPSBkMy5zY2FsZS5saW5lYXIoKS5yYW5nZShbMCwgaF0pO1xuICB6ID0gZDMuc2NhbGUub3JkaW5hbCgpLnJhbmdlKGNvbG9ycyk7XG5cbiAgLy8gQ29wZSB3aXRoIHZhcmlhYmxlIG51bWJlciBvZiBwcm9wZXJ0aWVzLCBmb3Igbm93XG4gIHZhciBhID0gW107XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgbWF0cml4WzBdLmxlbmd0aDsgaSsrKSB7XG4gICAgYS5wdXNoKFwiY1wiICsgaSk7XG4gIH1cbiAgLy92YXIgcmVtYXBwZWQgPSBbXCJjMVwiLFwiYzJcIixcImMzXCIsXCJjNFwiLFwiYzVcIl0ubWFwKGZ1bmN0aW9uKGRhdCxpKXtcbiAgdmFyIHJlbWFwcGVkID0gYS5tYXAoZnVuY3Rpb24oZGF0LGkpe1xuICAgIHJldHVybiBtYXRyaXgubWFwKGZ1bmN0aW9uKGQsaWkpe1xuICAgICAgcmV0dXJuIHt4OiBpaSwgeTogZFtpKzFdIH07XG4gICAgfSlcbiAgfSk7XG5cbiAgdmFyIHN0YWNrZWQgPSBkMy5sYXlvdXQuc3RhY2soKShyZW1hcHBlZClcblxuICB4LmRvbWFpbihzdGFja2VkWzBdLm1hcChmdW5jdGlvbihkKSB7IHJldHVybiBkLng7IH0pKTtcbiAgeS5kb21haW4oWzAsIGQzLm1heChzdGFja2VkW3N0YWNrZWQubGVuZ3RoIC0gMV0sIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueTAgKyBkLnk7IH0pXSk7XG5cbiAgdmFyIHZhbGdyb3VwID0gc3ZnLnNlbGVjdEFsbChcImcudmFsZ3JvdXBcIilcbiAgICAuZGF0YShzdGFja2VkKVxuICAgIC5lbnRlcigpLmFwcGVuZChcInN2ZzpnXCIpXG4gICAgLmF0dHIoXCJjbGFzc1wiLCBcInZhbGdyb3VwXCIpXG4gICAgLnN0eWxlKFwiZmlsbFwiLCBmdW5jdGlvbihkLCBpKSB7IHJldHVybiB6KGkpOyBjb25zb2xlLmxvZyh6KGkpKTt9KVxuICAgIC5zdHlsZShcInN0cm9rZVwiLCBmdW5jdGlvbihkLCBpKSB7IHJldHVybiBkMy5yZ2IoeihpKSkuZGFya2VyKCk7IH0pO1xuXG4gIHZhciByZWN0ID0gdmFsZ3JvdXAuc2VsZWN0QWxsKFwicmVjdFwiKVxuICAgIC5kYXRhKGZ1bmN0aW9uKGQpe3JldHVybiBkO30pXG4gICAgLmVudGVyKCkuYXBwZW5kKFwic3ZnOnJlY3RcIilcbiAgICAuYXR0cihcInhcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4geChkLngpOyB9KVxuICAgIC5hdHRyKFwieVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiAteShkLnkwKSAtIHkoZC55KTsgfSlcbiAgICAuYXR0cihcImhlaWdodFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiB5KGQueSk7IH0pXG4gICAgLmF0dHIoXCJ3aWR0aFwiLCBNYXRoLm1pbi5hcHBseShudWxsLCBbeC5yYW5nZUJhbmQoKS0yLCAxMDBdKSk7XG59XG5cbmZ1bmN0aW9uIHJhbmRvbVJHQiAoKSB7XG4gIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNTYpO1xufVxuXG5mdW5jdGlvbiBjb2x1bW5HcmFwaCAoYmluZFRvLCB2YWx1ZXMpIHtcbiAgdmFyIHcgPSA4MDtcbiAgdmFyIGggPSAzMDA7XG5cbiAgdmFyIHN2ZyA9IGQzLnNlbGVjdChiaW5kVG8pLmFwcGVuZChcInN2ZzpzdmdcIilcbiAgICAuYXR0cihcImNsYXNzXCIsIFwiY2hhcnRcIilcbiAgICAuYXR0cihcIndpZHRoXCIsIHcpXG4gICAgLmF0dHIoXCJoZWlnaHRcIiwgaCApXG4gICAgLmFwcGVuZChcInN2ZzpnXCIpXG4gICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCwzMDApXCIpO1xuXG4gIHZhciBtYXRyaXggPSBbdmFsdWVzXTtcblxuICAvLyBSYW5kb20gZm9yIG5vd1xuICB2YXIgY29sb3JzID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbWF0cml4WzBdLmxlbmd0aCAtMTsgaSsrKSB7XG4gICAgY29sb3JzLnB1c2goJ3JnYignICsgcmFuZG9tUkdCKCkgKyAnLCcgKyByYW5kb21SR0IoKSArICcsJyArIHJhbmRvbVJHQigpICsgJyknKTtcbiAgfVxuXG4gIHggPSBkMy5zY2FsZS5vcmRpbmFsKCkucmFuZ2VSb3VuZEJhbmRzKFswLCB3XSk7XG4gIHkgPSBkMy5zY2FsZS5saW5lYXIoKS5yYW5nZShbMCwgaF0pO1xuICB6ID0gZDMuc2NhbGUub3JkaW5hbCgpLnJhbmdlKGNvbG9ycyk7XG5cbiAgdmFyIHJlbWFwcGVkID1bXCJjMVwiLFwiYzJcIixcImMzXCIsXCJjNFwiLFwiYzVcIl0ubWFwKGZ1bmN0aW9uKGRhdCxpKXtcbiAgICByZXR1cm4gbWF0cml4Lm1hcChmdW5jdGlvbihkLGlpKXtcbiAgICAgIHJldHVybiB7eDogaWksIHk6IGRbaSsxXSB9O1xuICAgIH0pXG4gIH0pO1xuXG4gIHZhciBzdGFja2VkID0gZDMubGF5b3V0LnN0YWNrKCkocmVtYXBwZWQpO1xuXG4gIHguZG9tYWluKHN0YWNrZWRbMF0ubWFwKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueDsgfSkpO1xuICB5LmRvbWFpbihbMCwgZDMubWF4KHN0YWNrZWRbc3RhY2tlZC5sZW5ndGggLSAxXSwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC55MCArIGQueTsgfSldKTtcblxuICB2YXIgdmFsZ3JvdXAgPSBzdmcuc2VsZWN0QWxsKFwiZy52YWxncm91cFwiKVxuICAgIC5kYXRhKHN0YWNrZWQpXG4gICAgLmVudGVyKCkuYXBwZW5kKFwic3ZnOmdcIilcbiAgICAuYXR0cihcImNsYXNzXCIsIFwidmFsZ3JvdXBcIilcbiAgICAuc3R5bGUoXCJmaWxsXCIsIGZ1bmN0aW9uKGQsIGkpIHsgcmV0dXJuIHooaSk7IH0pXG4gICAgLnN0eWxlKFwic3Ryb2tlXCIsIGZ1bmN0aW9uKGQsIGkpIHsgcmV0dXJuIGQzLnJnYih6KGkpKS5kYXJrZXIoKTsgfSk7XG5cbiAgdmFyIHJlY3QgPSB2YWxncm91cC5zZWxlY3RBbGwoXCJyZWN0XCIpXG4gICAgLmRhdGEoZnVuY3Rpb24oZCl7cmV0dXJuIGQ7fSlcbiAgICAuZW50ZXIoKS5hcHBlbmQoXCJzdmc6cmVjdFwiKVxuICAgIC5hdHRyKFwieFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiB4KGQueCk7IH0pXG4gICAgLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIC15KGQueTApIC0geShkLnkpOyB9KVxuICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHkoZC55KTsgfSlcbiAgICAuYXR0cihcIndpZHRoXCIsIE1hdGgubWluLmFwcGx5KG51bGwsIFt4LnJhbmdlQmFuZCgpLTIsIDEwMF0pKTtcbn1cblxuIiwiLy8gcmVmZXJlbmNlOiBodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9zcHJlYWRzaGVldHMvZC8xcmpaWmcxOWdINFNUM1hGZlBhVW12Z0M5MEFDS2dSdzh4LU1nb296a0xmSS9lZGl0I2dpZD0wXG5cblxuZnVuY3Rpb24gc2hvY2tpbmdVcGRhdGUoaW5wdXRzKSB7XG5cblx0dmFyIGJhc2VsaW5lICAgICAgICAgPSBnZXRCYXNlbGluZSgpO1xuXHR2YXIgZ2VuX3Byb2R1Y3Rpb24gICA9IGJhc2VsaW5lWydnZW5fcHJvZHVjdGlvbiddO1xuXHR2YXIgZ2VuX2VtaXNzaW9ucyAgICA9IGJhc2VsaW5lWydnZW5fZW1pc3Npb25zJ107XG5cdHZhciBnZW5fY29zdCAgICAgICAgID0gYmFzZWxpbmVbJ2dlbl9jb3N0J107XG5cdHZhciBnZW5fY2FwaXRhbF9jb3N0ID0ge307XG5cblx0Ly8gYW5udWFsIHZlaGljbGUgZmxlZXQgZW1pc3Npb25zIGluIEtpbG90b25zIG9mIENPMiBFcXVpdmFsZW50XG5cdHZhciBmbGVldF9lbWlzc2lvbnMgPSB7XG5cdFx0J1JvYWQnOiAxMjY4OFxuXHR9XG4gXG5cdC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdC8vIEJ1c2luZXNzIGxvZ2ljXG5cdC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdFxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyBbMV0gRWxlY3RyaWMgY2Fyc1xuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLVxuXG5cdC8vIEFTU1VNUFRJT046IHRoZXJlIGFyZSBlc3NlbnRpYWxseSAwIGVsZWN0cmljIGNhcnMgaW4gdGhlIGN1cnJlbnQgZmxlZXRcblx0dmFyIGVsZWN0cmljX2NhcnMgPSBpbnB1dHNbJ2Nhck51bWJlciddO1xuXHR2YXIgZWxlY3RyaWNfcGN0ID0gZWxlY3RyaWNfY2Fycy8xMDA7XG5cblx0ZmxlZXRfZW1pc3Npb25zWydSb2FkJ10gPSBmbGVldF9lbWlzc2lvbnNbJ1JvYWQnXSAqICgxLWVsZWN0cmljX3BjdCk7XG5cblx0Ly8gQVNTVU1QVElPTjogYW55IHVwdGljayBpbiBwb3dlciBnZW5lcmF0aW9uIHJlcXVpcmVkIHRvIG1lZXRcblx0Ly8gZWxlY3RyaWMgY2FyIGRlbWFuZCwgd2lsbCBiZSBtZXQgcHJvcG9ydGlvbmFsbHkgYnkgYWxsIGdlbmVyYXRpb24gc291cmNlc1xuXHQvLyBBU1NVTVBUSU9OOiB0eXBpY2FsIEVWIHdpbGwgdXNlIDAuMiBrV2ggZm9yIDEga20gdHJhdmVsbGVkXG5cdC8vIGF2ZXJhZ2UgdHJhdmVsIGlzIDEyMDMyIGttIHBlciB5ZWFyXG5cdC8vIGZsZWV0IHNpemUgaXMgMzM0MTAxM1xuXHRldl9wb3dlcl9yZXF0cyA9IDEyMDMyICogMC4yICogMzM0MTAxMyAqIGVsZWN0cmljX3BjdDtcblx0XG5cdC8vIGNvbnZlcnQga3doIHRvIGd3aFxuXHRldl9wb3dlcl9yZXF0cyA9IGV2X3Bvd2VyX3JlcXRzIC8gMTAwMDAwMDtcblxuXHQvLyB3b3JrIG91dCB0b3RhbCBjdXJyZW50IGdlbmVyYXRpb25cblx0dmFyIHRvdGFsX2dlbiA9IDA7XG5cdGZvciAodmFyIGtleSBpbiBnZW5fcHJvZHVjdGlvbikge1xuXHRcdHRvdGFsX2dlbiArPSBnZW5fcHJvZHVjdGlvbltrZXldO1xuXHR9XG5cblx0dmFyIGluY3JlYXNlX2luX3Bvd2VyX3JlcXRzID0gMSArIChldl9wb3dlcl9yZXF0cyAvIHRvdGFsX2dlbik7XG5cblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS1cblx0Ly8gWzJdIFNvbGFyIEhvdXNlc1xuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLVxuXHR2YXIgc29sYXJfaG91c2VzID0gaW5wdXRzWydzb2xhck51bWJlciddO1xuXG5cdC8vIEFTU1VNUFRJT04gLSBlYWNoIGhvdXNlaG9sZCBnZW5lcmF0ZXMgNTI2MCBLV2ggcGVyIHllYXJcblx0dmFyIHNvbGFyX3Byb2R1Y3Rpb24gPSBzb2xhcl9ob3VzZXMgKiA1MjYwO1xuXHQvLyBjb252ZXJ0IHRvIEd3aFxuXHRzb2xhcl9wcm9kdWN0aW9uID0gc29sYXJfcHJvZHVjdGlvbiAvIDEwMDAwMDA7XG5cblx0Ly8gcmVkdWNlIHByb3BvcnRpb25hbGx5IGFsbCB0aGUgb3RoZXIgcHJvZHVjdGlvbiBhbmQgZW1pc3Npb25zXG5cdHZhciBkZWNyZWFzZV9kdWVfdG9fc29sYXIgPSBzb2xhcl9wcm9kdWN0aW9uIC8gdG90YWxfZ2VuO1xuXHRpbmNyZWFzZV9pbl9wb3dlcl9yZXF0cyAtPSBkZWNyZWFzZV9kdWVfdG9fc29sYXI7XG5cblxuXHQvLyAtLS0tLS0tLS0tXG5cdC8vIFszXSBXaW5kXG5cdC8vIC0tLS0tLS0tLS1cblx0Ly8vL3ZhciBuZXdfd2luZCA9IGlucHV0c1snd2luZE51bWJlciddO1xuXHRcblx0Ly8gQmFzZWQgb246IEVhY2ggbmV3IHdpbmQgZmFybSBpcyAyMDBXOyA3MDIgR1doIHBlciBhbm51bTtcblx0Ly8gY2FwaXRhbCBjb3N0IG9mICQ1MjEsMzQ0LDkxOFxuXHRcblx0Ly8gZmlyc3QgdGhlIGNhcGl0YWwgY29zdCwgdGhhdCdzIGVhc3k6XG5cdC8vLy9nZW5fY2FwaXRhbF9jb3N0WydXaW5kJ10gPSBuZXdfd2luZCAqIDUyMTM0NDkxODtcblxuXHQvLyBuZXcgd2luZCBjYXBhY2l0eVxuXHQvLy8vdmFyIG5ld193aW5kX2NhcGFjaXR5ID0gbmV3X3dpbmQgKiA3MDI7XG5cdC8vIG5ldyB3aW5kIGNhcGFjaXR5IGdpdmVzIHVzIGFzc29jaWF0ZWQgcHJvZHVjdGlvbiwgZW1pc3Npb25zLCBhbmQgcnVubmluZyBjb3N0c1xuXG5cdC8qaWYgKG5ld193aW5kID4gMCkge1xuXHRcdHZhciBuZXdfd2luZF9yYXRpbyA9IG5ld193aW5kX2NhcGFjaXR5IC8gZ2VuX3Byb2R1Y3Rpb25bJ1dpbmQnXTtcblx0fVxuXG5cdGdlbl9wcm9kdWN0aW9uWydXaW5kJ10gKz0gbmV3X3dpbmRfY2FwYWNpdHk7ICovXG5cblx0Ly8gVE9ETzogZmluYWxseSByZWR1Y2UgdGhlIG90aGVyIChob3BlZnVsbHkgbGVzcyBwb2xsdXRpbmcpIGdlbmVyYXRpb25cblxuXG5cdC8vIGFwcGx5IHRoZSBmYWN0b3IgdG8gdGhlIHByb2R1Y3Rpb25cblx0Zm9yICh2YXIga2V5IGluIGdlbl9wcm9kdWN0aW9uKSB7XG5cdFx0Z2VuX3Byb2R1Y3Rpb25ba2V5XSA9IGdlbl9wcm9kdWN0aW9uW2tleV0gKiBpbmNyZWFzZV9pbl9wb3dlcl9yZXF0cztcblx0fVxuXG5cdC8vIG5vdyBhZGQgaW4gdGhlIHNvbGFyXG5cdGdlbl9wcm9kdWN0aW9uWydTb2xhciddID0gc29sYXJfcHJvZHVjdGlvbjtcblxuXHRmb3IgKHZhciBrZXkgaW4gZ2VuX2VtaXNzaW9ucykge1xuXHRcdGdlbl9lbWlzc2lvbnNba2V5XSA9IGdlbl9lbWlzc2lvbnNba2V5XSAqIGluY3JlYXNlX2luX3Bvd2VyX3JlcXRzO1xuXHR9XG5cblx0Ly8gbm93IGFwcGx5IHRoYXQgZmFjdG9yIHRvIHRoZSBlbWlzc2lvbnMgLSBlbWlzc2lvbnMgZnJvbSBFViBwb3dlciByZXF1aXJlbWVudHNcblx0Zm9yICh2YXIga2V5IGluIGdlbl9lbWlzc2lvbnMpIHtcblx0XHRnZW5fZW1pc3Npb25zW2tleV0gPSBnZW5fZW1pc3Npb25zW2tleV0gKiBpbmNyZWFzZV9pbl9wb3dlcl9yZXF0cztcblx0fVxuXG5cdC8vIGFsc28gYXBwbHkgdGhlIHNhbWUgZmFjdG9yIHRvIHRoZSBnZW5lcmF0aW9uIGNvc3Rcblx0Zm9yICh2YXIga2V5IGluIGdlbl9jb3N0KSB7XG5cdFx0Z2VuX2Nvc3Rba2V5XSA9IGdlbl9jb3N0W2tleV0gKiBpbmNyZWFzZV9pbl9wb3dlcl9yZXF0cztcblx0fVxuXG5cblx0Ly8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblx0Ly8gT3V0cHV0XG5cdC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdHZhciByZXN1bHQgPSB7XG5cdFx0J2dlbl9wcm9kdWN0aW9uJzogZ2VuX3Byb2R1Y3Rpb24sXG5cdFx0J2dlbl9lbWlzc2lvbnMnOiBnZW5fZW1pc3Npb25zLFxuXHRcdCdnZW5fY29zdCc6IGdlbl9jb3N0LFxuXHRcdCdnZW5fY2FwaXRhbF9jb3N0JzogZ2VuX2NhcGl0YWxfY29zdCxcblx0XHQnZmxlZXRfZW1pc3Npb25zJzogZmxlZXRfZW1pc3Npb25zXG5cdH1cblxuXHRyZXR1cm4gcmVzdWx0O1xufVxuXG5cbmZ1bmN0aW9uIGdldEJhc2VsaW5lKCkge1xuXG5cdC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdC8vIEJhc2VsaW5lIGRhdGEgOiAyMDEzLzIwMTRcblx0Ly8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuXHQvLyBhbm51YWwgZ2VuZXJhdGlvbiBpbiBHaWdhd2F0dCBIb3Vyc1xuXHR2YXIgZ2VuX3Byb2R1Y3Rpb24gPSB7XG5cdFx0J0h5ZHJvJzogMjQwOTUsXG5cdFx0J0dlb3RoZXJtYWwnOiA2NDg3LFxuXHRcdCdXaW5kJzogMjE4Nyxcblx0XHQnQ29hbCc6IDE4MzIsXG5cdFx0J0dhcyc6IDY2MjZcblx0fVxuXG5cdC8vIGFubnVhbCBnZW5lcmF0aW9uIGVtaXNzaW9ucyBpbiBLaWxvdG9ucyBvZiBDTzIgRXF1aXZhbGVudFxuXHR2YXIgZ2VuX2VtaXNzaW9ucyA9IHtcblx0XHQnSHlkcm8nOiAwLFxuXHRcdCdHZW90aGVybWFsJzogODQ3LjMyLFxuXHRcdCdXaW5kJzogMCxcblx0XHQnQ29hbCc6IDEyMjIuMixcblx0XHQnR2FzJzogMzQwNS41MVxuXHR9XG5cblx0Ly8gYW5udWFsIGdlbmVyYXRpb24gY29zdHMgaW4gJE5aIHBlciB5ZWFyIChJIHRoaW5rKVxuXHR2YXIgZ2VuX2Nvc3QgPSB7XG5cdFx0J0h5ZHJvJzogNTM4NzIxODAsXG5cdFx0J0dlb3RoZXJtYWwnOiA1OTUzNTAwMCxcblx0XHQnV2luZCc6IDQzNDg0MDAwLFxuXHRcdCdDb2FsJzogMzQxNzcyMDAsXG5cdFx0J0dhcyc6IDE2MTA0NDE5MlxuXHR9XG5cblx0dmFyIHJlc3VsdCA9IHtcblx0XHQnZ2VuX3Byb2R1Y3Rpb24nOiBnZW5fcHJvZHVjdGlvbixcblx0XHQnZ2VuX2VtaXNzaW9ucyc6IGdlbl9lbWlzc2lvbnMsXG5cdFx0J2dlbl9jb3N0JzogZ2VuX2Nvc3QsXG5cdH1cblxuXHRyZXR1cm4gcmVzdWx0O1xufVxuXG5cbiIsIi8vIE5COiB0cmFuc2xhdGVkIHRvIGF2b2lkIHVzaW5nIEpRdWVyeSwgc2luY2Ugd2UgZG9uJ3QgbmVlZCBpdCBmb3IgYW55dGhpbmcgZWxzZVxuZnVuY3Rpb24gcG93ZXJPZmYoKSB7XG4gIGRvY3VtZW50LmJvZHkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2h0bWwnKVswXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnYmxhY2snO1xuICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaHRtbCcpWzBdLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdub25lJztcbiAgfSwgMzAwMCk7XG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=